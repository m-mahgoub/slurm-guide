{
  "hash": "cef874773f945fa7d4de8193e235cee0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Quick Start Guide\"\nengine: knitr\nexecute: \n  freeze: false\n---\n\n\n\n\n## Setting Up Your Environment\n\nThis section will guide you through the steps to set up your environment, load modules, and verify your setup. Follow these steps to ensure you are ready to use the Compute2 SLURM cluster effectively.\n\n### Launch an Interactive Session\n\nTo begin, launch an interactive SLURM session. This ensures that you are not running heavy workloads on the login node.\n\n```bash\nsrun --time=\"4:00:00\" --nodes=1 --ntasks=4 --mem=24G --pty /bin/bash\n```\n\n### Configure Your Environment\n\n#### Set Up the Module Path\n\nExport the custom module path to include user-installed environments:\n\n```bash\nexport MODULEPATH=/storage2/fs1/dspencer/Active/spencerlab/apps/modules/modulefiles:$MODULEPATH\n```\n\n#### Load Core Tools\n\nLoad the `basetools` module to access the core tools used in the lab:\n\n```bash\nmodule load basetools\n```\n\n### Automate Your Setup (Optional)\n\nTo streamline your workflow, you can add the setup commands to your `.bashrc` file. This ensures that the environment is configured automatically upon login.\n\n#### Example `.bashrc` Configuration\n\n```bash\n# Export the custom module path\nexport MODULEPATH=/storage2/fs1/dspencer/Active/spencerlab/apps/modules/modulefiles:$MODULEPATH\n\n# Conditionally load 'basetools' when using VS Code Remote-SSH\nif [[ -n \"$VSCODE_IPC_HOOK_CLI\" ]]; then\n  echo \"Detected VS Code Remote-SSH session. Loading 'basetools' module...\"\n  module load basetools\nfi\n```\n\n### Verify Your Setup\n\nFinally, verify that your environment is correctly configured by checking the version of a core tool like `samtools`:\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nsamtools --version\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\nsamtools 1.19.2\nUsing htslib 1.19.1\nCopyright (C) 2024 Genome Research Ltd.\n\nSamtools compilation details:\n    Features:       build=configure curses=yes \n    CC:             /scratch2/fs1/sleong/Active/compute2/ris/thpc/linux/software/spack/v0.23/lib/spack/env/gcc/gcc\n    CPPFLAGS:       \n    CFLAGS:         -Wall -g -O2\n    LDFLAGS:        \n    HTSDIR:         \n    LIBS:           \n    CURSES_LIB:     -lncursesw -ltinfow\n\nHTSlib compilation details:\n    Features:       build=configure libcurl=yes S3=yes GCS=yes libdeflate=yes lzma=yes bzip2=yes plugins=no htscodecs=1.6.0\n    CC:             /scratch2/fs1/sleong/Active/compute2/ris/thpc/linux/software/spack/v0.23/lib/spack/env/gcc/gcc\n    CPPFLAGS:       \n    CFLAGS:         -Wall -g -O2 -fvisibility=hidden\n    LDFLAGS:        -fvisibility=hidden \n\nHTSlib URL scheme handlers present:\n    built-in:\t preload, data, file\n    S3 Multipart Upload:\t s3w, s3w+https, s3w+http\n    Amazon S3:\t s3+https, s3+http, s3\n    Google Cloud Storage:\t gs+http, gs+https, gs\n    libcurl:\t imaps, pop3, gophers, http, smb, gopher, ftps, imap, smtp, smtps, rtsp, ftp, telnet, mqtt, https, smbs, tftp, pop3s, dict\n    crypt4gh-needed:\t crypt4gh\n    mem:\t mem\n```\n\n\n:::\n:::\n\n\n\n\nWith the `basetools` module loaded, you should now have access to most of the tools available in the Docker base image, as well as R and Python with commonly used packages.\n\n---\n\n## Apptainer Jobs\n\nApptainer is a container technology designed for high-performance computing environments. It allows you to run containerized applications on the Compute2 SLURM cluster. This section demonstrates how to use Apptainer for a common bioinformatics task.\n\n### Example: Converting BAM to CRAM Using Apptainer\n\nThis example shows how to convert a BAM file to a CRAM file using `samtools` within an Apptainer container.\n\n#### Step 1: Download Input Files\n\nFirst, download the required input files (a BAM file and a reference genome):\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nmkdir -p ~/test\nwget -O ~/test/test.bam https://raw.githubusercontent.com/m-mahgoub/bam2fastq/f9163d85ad8912929b242a08a21d505d84776337/data/SPT5_T0_rep1.sorted.bam\nwget -O ~/test/ref.fa https://raw.githubusercontent.com/m-mahgoub/bam2fastq/refs/heads/main/data/genome.fa\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n--2025-03-23 22:41:02--  https://raw.githubusercontent.com/m-mahgoub/bam2fastq/f9163d85ad8912929b242a08a21d505d84776337/data/SPT5_T0_rep1.sorted.bam\nResolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.111.133, 185.199.110.133, 185.199.108.133, ...\nConnecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.111.133|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 7446300 (7.1M) [application/octet-stream]\nSaving to: ‘/home/mmohamed/test/test.bam’\n\n     0K .......... .......... .......... .......... ..........  0% 1.37M 5s\n    50K .......... .......... .......... .......... ..........  1% 1.93M 4s\n   100K .......... .......... .......... .......... ..........  2% 7.04M 3s\n   150K .......... .......... .......... .......... ..........  2% 8.37M 3s\n   200K .......... .......... .......... .......... ..........  3% 3.00M 3s\n   250K .......... .......... .......... .......... ..........  4% 11.3M 2s\n   300K .......... .......... .......... .......... ..........  4% 11.7M 2s\n   350K .......... .......... .......... .......... ..........  5% 15.5M 2s\n   400K .......... .......... .......... .......... ..........  6% 12.8M 2s\n   450K .......... .......... .......... .......... ..........  6% 4.10M 2s\n   500K .......... .......... .......... .......... ..........  7% 19.0M 1s\n   550K .......... .......... .......... .......... ..........  8% 18.9M 1s\n   600K .......... .......... .......... .......... ..........  8% 25.7M 1s\n   650K .......... .......... .......... .......... ..........  9% 27.4M 1s\n   700K .......... .......... .......... .......... .......... 10% 31.8M 1s\n   750K .......... .......... .......... .......... .......... 11% 21.4M 1s\n   800K .......... .......... .......... .......... .......... 11% 24.6M 1s\n   850K .......... .......... .......... .......... .......... 12% 47.5M 1s\n   900K .......... .......... .......... .......... .......... 13% 25.8M 1s\n   950K .......... .......... .......... .......... .......... 13% 59.0M 1s\n  1000K .......... .......... .......... .......... .......... 14% 4.52M 1s\n  1050K .......... .......... .......... .......... .......... 15% 44.4M 1s\n  1100K .......... .......... .......... .......... .......... 15% 22.6M 1s\n  1150K .......... .......... .......... .......... .......... 16% 96.8M 1s\n  1200K .......... .......... .......... .......... .......... 17% 26.3M 1s\n  1250K .......... .......... .......... .......... .......... 17% 34.6M 1s\n  1300K .......... .......... .......... .......... .......... 18% 60.9M 1s\n  1350K .......... .......... .......... .......... .......... 19% 52.2M 1s\n  1400K .......... .......... .......... .......... .......... 19% 50.1M 1s\n  1450K .......... .......... .......... .......... .......... 20% 76.4M 1s\n  1500K .......... .......... .......... .......... .......... 21% 63.6M 1s\n  1550K .......... .......... .......... .......... .......... 22% 36.6M 1s\n  1600K .......... .......... .......... .......... .......... 22% 49.0M 1s\n  1650K .......... .......... .......... .......... .......... 23% 40.0M 1s\n  1700K .......... .......... .......... .......... .......... 24%  694M 1s\n  1750K .......... .......... .......... .......... .......... 24% 48.7M 0s\n  1800K .......... .......... .......... .......... .......... 25% 59.5M 0s\n  1850K .......... .......... .......... .......... .......... 26% 49.1M 0s\n  1900K .......... .......... .......... .......... .......... 26%  852M 0s\n  1950K .......... .......... .......... .......... .......... 27% 67.3M 0s\n  2000K .......... .......... .......... .......... .......... 28% 4.69M 0s\n  2050K .......... .......... .......... .......... .......... 28%  104M 0s\n  2100K .......... .......... .......... .......... .......... 29% 48.2M 0s\n  2150K .......... .......... .......... .......... .......... 30%  887M 0s\n  2200K .......... .......... .......... .......... .......... 30% 53.8M 0s\n  2250K .......... .......... .......... .......... .......... 31% 39.0M 0s\n  2300K .......... .......... .......... .......... .......... 32%  146M 0s\n  2350K .......... .......... .......... .......... .......... 33%  598M 0s\n  2400K .......... .......... .......... .......... .......... 33% 31.4M 0s\n  2450K .......... .......... .......... .......... .......... 34%  151M 0s\n  2500K .......... .......... .......... .......... .......... 35% 67.0M 0s\n  2550K .......... .......... .......... .......... .......... 35% 68.5M 0s\n  2600K .......... .......... .......... .......... .......... 36%  809M 0s\n  2650K .......... .......... .......... .......... .......... 37% 66.1M 0s\n  2700K .......... .......... .......... .......... .......... 37% 82.7M 0s\n  2750K .......... .......... .......... .......... .......... 38% 78.1M 0s\n  2800K .......... .......... .......... .......... .......... 39% 87.1M 0s\n  2850K .......... .......... .......... .......... .......... 39%  845M 0s\n  2900K .......... .......... .......... .......... .......... 40% 66.8M 0s\n  2950K .......... .......... .......... .......... .......... 41%  102M 0s\n  3000K .......... .......... .......... .......... .......... 41% 87.7M 0s\n  3050K .......... .......... .......... .......... .......... 42%  685M 0s\n  3100K .......... .......... .......... .......... .......... 43% 86.8M 0s\n  3150K .......... .......... .......... .......... .......... 44% 82.8M 0s\n  3200K .......... .......... .......... .......... .......... 44% 92.1M 0s\n  3250K .......... .......... .......... .......... .......... 45% 81.3M 0s\n  3300K .......... .......... .......... .......... .......... 46%  841M 0s\n  3350K .......... .......... .......... .......... .......... 46%  106M 0s\n  3400K .......... .......... .......... .......... .......... 47% 77.0M 0s\n  3450K .......... .......... .......... .......... .......... 48%  130M 0s\n  3500K .......... .......... .......... .......... .......... 48%  103M 0s\n  3550K .......... .......... .......... .......... .......... 49% 98.4M 0s\n  3600K .......... .......... .......... .......... .......... 50%  680M 0s\n  3650K .......... .......... .......... .......... .......... 50%  106M 0s\n  3700K .......... .......... .......... .......... .......... 51% 90.5M 0s\n  3750K .......... .......... .......... .......... .......... 52%  110M 0s\n  3800K .......... .......... .......... .......... .......... 52%  848M 0s\n  3850K .......... .......... .......... .......... .......... 53%  115M 0s\n  3900K .......... .......... .......... .......... .......... 54%  101M 0s\n  3950K .......... .......... .......... .......... .......... 55%  127M 0s\n  4000K .......... .......... .......... .......... .......... 55% 5.03M 0s\n  4050K .......... .......... .......... .......... .......... 56%  467M 0s\n  4100K .......... .......... .......... .......... .......... 57%  203M 0s\n  4150K .......... .......... .......... .......... .......... 57%  115M 0s\n  4200K .......... .......... .......... .......... .......... 58%  146M 0s\n  4250K .......... .......... .......... .......... .......... 59%  461M 0s\n  4300K .......... .......... .......... .......... .......... 59%  116M 0s\n  4350K .......... .......... .......... .......... .......... 60%  139M 0s\n  4400K .......... .......... .......... .......... .......... 61%  109M 0s\n  4450K .......... .......... .......... .......... .......... 61%  135M 0s\n  4500K .......... .......... .......... .......... .......... 62%  892M 0s\n  4550K .......... .......... .......... .......... .......... 63% 55.4M 0s\n  4600K .......... .......... .......... .......... .......... 63%  282M 0s\n  4650K .......... .......... .......... .......... .......... 64%  148M 0s\n  4700K .......... .......... .......... .......... .......... 65%  549M 0s\n  4750K .......... .......... .......... .......... .......... 66%  130M 0s\n  4800K .......... .......... .......... .......... .......... 66% 57.1M 0s\n  4850K .......... .......... .......... .......... .......... 67%  203M 0s\n  4900K .......... .......... .......... .......... .......... 68%  165M 0s\n  4950K .......... .......... .......... .......... .......... 68%  791M 0s\n  5000K .......... .......... .......... .......... .......... 69%  124M 0s\n  5050K .......... .......... .......... .......... .......... 70%  150M 0s\n  5100K .......... .......... .......... .......... .......... 70%  137M 0s\n  5150K .......... .......... .......... .......... .......... 71%  136M 0s\n  5200K .......... .......... .......... .......... .......... 72%  179M 0s\n  5250K .......... .......... .......... .......... .......... 72%  666M 0s\n  5300K .......... .......... .......... .......... .......... 73%  156M 0s\n  5350K .......... .......... .......... .......... .......... 74%  128M 0s\n  5400K .......... .......... .......... .......... .......... 74%  194M 0s\n  5450K .......... .......... .......... .......... .......... 75%  474M 0s\n  5500K .......... .......... .......... .......... .......... 76%  139M 0s\n  5550K .......... .......... .......... .......... .......... 77%  148M 0s\n  5600K .......... .......... .......... .......... .......... 77%  155M 0s\n  5650K .......... .......... .......... .......... .......... 78%  232M 0s\n  5700K .......... .......... .......... .......... .......... 79%  337M 0s\n  5750K .......... .......... .......... .......... .......... 79%  182M 0s\n  5800K .......... .......... .......... .......... .......... 80%  146M 0s\n  5850K .......... .......... .......... .......... .......... 81%  153M 0s\n  5900K .......... .......... .......... .......... .......... 81%  225M 0s\n  5950K .......... .......... .......... .......... .......... 82%  405M 0s\n  6000K .......... .......... .......... .......... .......... 83%  131M 0s\n  6050K .......... .......... .......... .......... .......... 83% 93.1M 0s\n  6100K .......... .......... .......... .......... .......... 84%  104M 0s\n  6150K .......... .......... .......... .......... .......... 85%  267M 0s\n  6200K .......... .......... .......... .......... .......... 85%  113M 0s\n  6250K .......... .......... .......... .......... .......... 86% 71.2M 0s\n  6300K .......... .......... .......... .......... .......... 87%  136M 0s\n  6350K .......... .......... .......... .......... .......... 88% 70.7M 0s\n  6400K .......... .......... .......... .......... .......... 88%  771M 0s\n  6450K .......... .......... .......... .......... .......... 89%  150M 0s\n  6500K .......... .......... .......... .......... .......... 90% 92.4M 0s\n  6550K .......... .......... .......... .......... .......... 90%  133M 0s\n  6600K .......... .......... .......... .......... .......... 91%  100M 0s\n  6650K .......... .......... .......... .......... .......... 92%  308M 0s\n  6700K .......... .......... .......... .......... .......... 92% 95.1M 0s\n  6750K .......... .......... .......... .......... .......... 93%  110M 0s\n  6800K .......... .......... .......... .......... .......... 94%  115M 0s\n  6850K .......... .......... .......... .......... .......... 94%  828M 0s\n  6900K .......... .......... .......... .......... .......... 95%  722M 0s\n  6950K .......... .......... .......... .......... .......... 96% 61.2M 0s\n  7000K .......... .......... .......... .......... .......... 96%  411M 0s\n  7050K .......... .......... .......... .......... .......... 97% 5.09M 0s\n  7100K .......... .......... .......... .......... .......... 98%  232M 0s\n  7150K .......... .......... .......... .......... .......... 99% 88.7M 0s\n  7200K .......... .......... .......... .......... .......... 99%  141M 0s\n  7250K .......... .......... .                               100%  993M=0.2s\n\n2025-03-23 22:41:02 (30.2 MB/s) - ‘/home/mmohamed/test/test.bam’ saved [7446300/7446300]\n\n--2025-03-23 22:41:02--  https://raw.githubusercontent.com/m-mahgoub/bam2fastq/refs/heads/main/data/genome.fa\nResolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.109.133, 185.199.111.133, 185.199.108.133, ...\nConnecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.109.133|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 12359807 (12M) [text/plain]\nSaving to: ‘/home/mmohamed/test/ref.fa’\n\n     0K .......... .......... .......... .......... ..........  0% 1.71M 7s\n    50K .......... .......... .......... .......... ..........  0% 1.93M 6s\n   100K .......... .......... .......... .......... ..........  1% 6.76M 5s\n   150K .......... .......... .......... .......... ..........  1% 11.0M 4s\n   200K .......... .......... .......... .......... ..........  2% 3.26M 4s\n   250K .......... .......... .......... .......... ..........  2% 13.8M 3s\n   300K .......... .......... .......... .......... ..........  2% 14.7M 3s\n   350K .......... .......... .......... .......... ..........  3% 12.6M 3s\n   400K .......... .......... .......... .......... ..........  3% 19.2M 2s\n   450K .......... .......... .......... .......... ..........  4% 4.10M 2s\n   500K .......... .......... .......... .......... ..........  4% 25.1M 2s\n   550K .......... .......... .......... .......... ..........  4% 23.1M 2s\n   600K .......... .......... .......... .......... ..........  5% 20.4M 2s\n   650K .......... .......... .......... .......... ..........  5% 36.4M 2s\n   700K .......... .......... .......... .......... ..........  6% 24.7M 2s\n   750K .......... .......... .......... .......... ..........  6% 61.4M 2s\n   800K .......... .......... .......... .......... ..........  7% 28.5M 2s\n   850K .......... .......... .......... .......... ..........  7% 32.5M 1s\n   900K .......... .......... .......... .......... ..........  7% 81.7M 1s\n   950K .......... .......... .......... .......... ..........  8% 30.0M 1s\n  1000K .......... .......... .......... .......... ..........  8% 4.77M 1s\n  1050K .......... .......... .......... .......... ..........  9% 25.0M 1s\n  1100K .......... .......... .......... .......... ..........  9% 94.9M 1s\n  1150K .......... .......... .......... .......... ..........  9% 97.6M 1s\n  1200K .......... .......... .......... .......... .......... 10% 41.1M 1s\n  1250K .......... .......... .......... .......... .......... 10% 39.2M 1s\n  1300K .......... .......... .......... .......... .......... 11% 51.0M 1s\n  1350K .......... .......... .......... .......... .......... 11%  139M 1s\n  1400K .......... .......... .......... .......... .......... 12% 42.6M 1s\n  1450K .......... .......... .......... .......... .......... 12% 44.6M 1s\n  1500K .......... .......... .......... .......... .......... 12% 54.5M 1s\n  1550K .......... .......... .......... .......... .......... 13%  863M 1s\n  1600K .......... .......... .......... .......... .......... 13% 34.5M 1s\n  1650K .......... .......... .......... .......... .......... 14% 53.8M 1s\n  1700K .......... .......... .......... .......... .......... 14% 82.8M 1s\n  1750K .......... .......... .......... .......... .......... 14%  818M 1s\n  1800K .......... .......... .......... .......... .......... 15% 49.0M 1s\n  1850K .......... .......... .......... .......... .......... 15% 73.8M 1s\n  1900K .......... .......... .......... .......... .......... 16% 59.8M 1s\n  1950K .......... .......... .......... .......... .......... 16% 60.8M 1s\n  2000K .......... .......... .......... .......... .......... 16%  708M 1s\n  2050K .......... .......... .......... .......... .......... 17% 5.32M 1s\n  2100K .......... .......... .......... .......... .......... 17% 54.3M 1s\n  2150K .......... .......... .......... .......... .......... 18%  108M 1s\n  2200K .......... .......... .......... .......... .......... 18% 35.0M 1s\n  2250K .......... .......... .......... .......... .......... 19%  750M 1s\n  2300K .......... .......... .......... .......... .......... 19% 79.4M 1s\n  2350K .......... .......... .......... .......... .......... 19%  122M 1s\n  2400K .......... .......... .......... .......... .......... 20% 57.2M 1s\n  2450K .......... .......... .......... .......... .......... 20%  120M 1s\n  2500K .......... .......... .......... .......... .......... 21%  800M 1s\n  2550K .......... .......... .......... .......... .......... 21% 55.0M 1s\n  2600K .......... .......... .......... .......... .......... 21%  139M 1s\n  2650K .......... .......... .......... .......... .......... 22% 66.6M 1s\n  2700K .......... .......... .......... .......... .......... 22%  789M 1s\n  2750K .......... .......... .......... .......... .......... 23%  118M 1s\n  2800K .......... .......... .......... .......... .......... 23% 65.0M 1s\n  2850K .......... .......... .......... .......... .......... 24%  131M 1s\n  2900K .......... .......... .......... .......... .......... 24% 67.3M 1s\n  2950K .......... .......... .......... .......... .......... 24%  768M 1s\n  3000K .......... .......... .......... .......... .......... 25%  144M 0s\n  3050K .......... .......... .......... .......... .......... 25% 95.9M 0s\n  3100K .......... .......... .......... .......... .......... 26% 95.2M 0s\n  3150K .......... .......... .......... .......... .......... 26% 99.0M 0s\n  3200K .......... .......... .......... .......... .......... 26% 65.3M 0s\n  3250K .......... .......... .......... .......... .......... 27%  705M 0s\n  3300K .......... .......... .......... .......... .......... 27%  226M 0s\n  3350K .......... .......... .......... .......... .......... 28% 72.3M 0s\n  3400K .......... .......... .......... .......... .......... 28%  206M 0s\n  3450K .......... .......... .......... .......... .......... 28%  742M 0s\n  3500K .......... .......... .......... .......... .......... 29%  107M 0s\n  3550K .......... .......... .......... .......... .......... 29%  111M 0s\n  3600K .......... .......... .......... .......... .......... 30%  107M 0s\n  3650K .......... .......... .......... .......... .......... 30% 95.9M 0s\n  3700K .......... .......... .......... .......... .......... 31%  852M 0s\n  3750K .......... .......... .......... .......... .......... 31%  147M 0s\n  3800K .......... .......... .......... .......... .......... 31%  123M 0s\n  3850K .......... .......... .......... .......... .......... 32%  125M 0s\n  3900K .......... .......... .......... .......... .......... 32%  772M 0s\n  3950K .......... .......... .......... .......... .......... 33%  121M 0s\n  4000K .......... .......... .......... .......... .......... 33%  124M 0s\n  4050K .......... .......... .......... .......... .......... 33%  124M 0s\n  4100K .......... .......... .......... .......... .......... 34% 5.88M 0s\n  4150K .......... .......... .......... .......... .......... 34%  298M 0s\n  4200K .......... .......... .......... .......... .......... 35%  240M 0s\n  4250K .......... .......... .......... .......... .......... 35% 63.6M 0s\n  4300K .......... .......... .......... .......... .......... 36%  362M 0s\n  4350K .......... .......... .......... .......... .......... 36%  132M 0s\n  4400K .......... .......... .......... .......... .......... 36%  880M 0s\n  4450K .......... .......... .......... .......... .......... 37%  135M 0s\n  4500K .......... .......... .......... .......... .......... 37% 50.2M 0s\n  4550K .......... .......... .......... .......... .......... 38%  350M 0s\n  4600K .......... .......... .......... .......... .......... 38%  665M 0s\n  4650K .......... .......... .......... .......... .......... 38% 94.1M 0s\n  4700K .......... .......... .......... .......... .......... 39%  282M 0s\n  4750K .......... .......... .......... .......... .......... 39%  145M 0s\n  4800K .......... .......... .......... .......... .......... 40%  152M 0s\n  4850K .......... .......... .......... .......... .......... 40%  136M 0s\n  4900K .......... .......... .......... .......... .......... 41%  763M 0s\n  4950K .......... .......... .......... .......... .......... 41%  188M 0s\n  5000K .......... .......... .......... .......... .......... 41%  156M 0s\n  5050K .......... .......... .......... .......... .......... 42%  168M 0s\n  5100K .......... .......... .......... .......... .......... 42%  822M 0s\n  5150K .......... .......... .......... .......... .......... 43% 98.5M 0s\n  5200K .......... .......... .......... .......... .......... 43%  322M 0s\n  5250K .......... .......... .......... .......... .......... 43%  162M 0s\n  5300K .......... .......... .......... .......... .......... 44%  173M 0s\n  5350K .......... .......... .......... .......... .......... 44%  775M 0s\n  5400K .......... .......... .......... .......... .......... 45%  178M 0s\n  5450K .......... .......... .......... .......... .......... 45%  164M 0s\n  5500K .......... .......... .......... .......... .......... 45%  175M 0s\n  5550K .......... .......... .......... .......... .......... 46%  182M 0s\n  5600K .......... .......... .......... .......... .......... 46%  807M 0s\n  5650K .......... .......... .......... .......... .......... 47%  183M 0s\n  5700K .......... .......... .......... .......... .......... 47%  166M 0s\n  5750K .......... .......... .......... .......... .......... 48%  190M 0s\n  5800K .......... .......... .......... .......... .......... 48%  831M 0s\n  5850K .......... .......... .......... .......... .......... 48%  180M 0s\n  5900K .......... .......... .......... .......... .......... 49%  188M 0s\n  5950K .......... .......... .......... .......... .......... 49%  192M 0s\n  6000K .......... .......... .......... .......... .......... 50%  109M 0s\n  6050K .......... .......... .......... .......... .......... 50%  787M 0s\n  6100K .......... .......... .......... .......... .......... 50% 80.9M 0s\n  6150K .......... .......... .......... .......... .......... 51%  124M 0s\n  6200K .......... .......... .......... .......... .......... 51% 65.3M 0s\n  6250K .......... .......... .......... .......... .......... 52%  222M 0s\n  6300K .......... .......... .......... .......... .......... 52%  826M 0s\n  6350K .......... .......... .......... .......... .......... 53% 74.3M 0s\n  6400K .......... .......... .......... .......... .......... 53%  149M 0s\n  6450K .......... .......... .......... .......... .......... 53%  122M 0s\n  6500K .......... .......... .......... .......... .......... 54%  835M 0s\n  6550K .......... .......... .......... .......... .......... 54%  111M 0s\n  6600K .......... .......... .......... .......... .......... 55%  493M 0s\n  6650K .......... .......... .......... .......... .......... 55% 58.8M 0s\n  6700K .......... .......... .......... .......... .......... 55%  117M 0s\n  6750K .......... .......... .......... .......... .......... 56%  104M 0s\n  6800K .......... .......... .......... .......... .......... 56%  830M 0s\n  6850K .......... .......... .......... .......... .......... 57%  177M 0s\n  6900K .......... .......... .......... .......... .......... 57%  122M 0s\n  6950K .......... .......... .......... .......... .......... 57%  121M 0s\n  7000K .......... .......... .......... .......... .......... 58%  713M 0s\n  7050K .......... .......... .......... .......... .......... 58%  121M 0s\n  7100K .......... .......... .......... .......... .......... 59% 5.78M 0s\n  7150K .......... .......... .......... .......... .......... 59%  736M 0s\n  7200K .......... .......... .......... .......... .......... 60% 60.0M 0s\n  7250K .......... .......... .......... .......... .......... 60%  856M 0s\n  7300K .......... .......... .......... .......... .......... 60%  293M 0s\n  7350K .......... .......... .......... .......... .......... 61%  133M 0s\n  7400K .......... .......... .......... .......... .......... 61%  131M 0s\n  7450K .......... .......... .......... .......... .......... 62% 52.0M 0s\n  7500K .......... .......... .......... .......... .......... 62%  652M 0s\n  7550K .......... .......... .......... .......... .......... 62%  336M 0s\n  7600K .......... .......... .......... .......... .......... 63% 93.2M 0s\n  7650K .......... .......... .......... .......... .......... 63%  332M 0s\n  7700K .......... .......... .......... .......... .......... 64%  639M 0s\n  7750K .......... .......... .......... .......... .......... 64%  141M 0s\n  7800K .......... .......... .......... .......... .......... 65%  155M 0s\n  7850K .......... .......... .......... .......... .......... 65%  132M 0s\n  7900K .......... .......... .......... .......... .......... 65%  123M 0s\n  7950K .......... .......... .......... .......... .......... 66%  824M 0s\n  8000K .......... .......... .......... .......... .......... 66%  256M 0s\n  8050K .......... .......... .......... .......... .......... 67%  173M 0s\n  8100K .......... .......... .......... .......... .......... 67% 97.0M 0s\n  8150K .......... .......... .......... .......... .......... 67%  387M 0s\n  8200K .......... .......... .......... .......... .......... 68%  772M 0s\n  8250K .......... .......... .......... .......... .......... 68%  154M 0s\n  8300K .......... .......... .......... .......... .......... 69%  166M 0s\n  8350K .......... .......... .......... .......... .......... 69%  182M 0s\n  8400K .......... .......... .......... .......... .......... 70%  849M 0s\n  8450K .......... .......... .......... .......... .......... 70%  160M 0s\n  8500K .......... .......... .......... .......... .......... 70%  172M 0s\n  8550K .......... .......... .......... .......... .......... 71%  132M 0s\n  8600K .......... .......... .......... .......... .......... 71%  188M 0s\n  8650K .......... .......... .......... .......... .......... 72%  891M 0s\n  8700K .......... .......... .......... .......... .......... 72%  246M 0s\n  8750K .......... .......... .......... .......... .......... 72%  196M 0s\n  8800K .......... .......... .......... .......... .......... 73%  164M 0s\n  8850K .......... .......... .......... .......... .......... 73%  215M 0s\n  8900K .......... .......... .......... .......... .......... 74%  630M 0s\n  8950K .......... .......... .......... .......... .......... 74%  186M 0s\n  9000K .......... .......... .......... .......... .......... 74%  107M 0s\n  9050K .......... .......... .......... .......... .......... 75% 78.9M 0s\n  9100K .......... .......... .......... .......... .......... 75%  143M 0s\n  9150K .......... .......... .......... .......... .......... 76%  582M 0s\n  9200K .......... .......... .......... .......... .......... 76% 65.4M 0s\n  9250K .......... .......... .......... .......... .......... 77%  219M 0s\n  9300K .......... .......... .......... .......... .......... 77% 70.4M 0s\n  9350K .......... .......... .......... .......... .......... 77%  180M 0s\n  9400K .......... .......... .......... .......... .......... 78%  671M 0s\n  9450K .......... .......... .......... .......... .......... 78%  118M 0s\n  9500K .......... .......... .......... .......... .......... 79% 87.0M 0s\n  9550K .......... .......... .......... .......... .......... 79%  719M 0s\n  9600K .......... .......... .......... .......... .......... 79%  841M 0s\n  9650K .......... .......... .......... .......... .......... 80% 65.1M 0s\n  9700K .......... .......... .......... .......... .......... 80%  110M 0s\n  9750K .......... .......... .......... .......... .......... 81%  114M 0s\n  9800K .......... .......... .......... .......... .......... 81%  817M 0s\n  9850K .......... .......... .......... .......... .......... 82%  160M 0s\n  9900K .......... .......... .......... .......... .......... 82%  133M 0s\n  9950K .......... .......... .......... .......... .......... 82%  122M 0s\n 10000K .......... .......... .......... .......... .......... 83%  114M 0s\n 10050K .......... .......... .......... .......... .......... 83% 5.58M 0s\n 10100K .......... .......... .......... .......... .......... 84%  500M 0s\n 10150K .......... .......... .......... .......... .......... 84%  888M 0s\n 10200K .......... .......... .......... .......... .......... 84%  109M 0s\n 10250K .......... .......... .......... .......... .......... 85%  236M 0s\n 10300K .......... .......... .......... .......... .......... 85%  152M 0s\n 10350K .......... .......... .......... .......... .......... 86%  620M 0s\n 10400K .......... .......... .......... .......... .......... 86%  126M 0s\n 10450K .......... .......... .......... .......... .......... 86% 52.5M 0s\n 10500K .......... .......... .......... .......... .......... 87%  369M 0s\n 10550K .......... .......... .......... .......... .......... 87% 83.7M 0s\n 10600K .......... .......... .......... .......... .......... 88%  681M 0s\n 10650K .......... .......... .......... .......... .......... 88%  519M 0s\n 10700K .......... .......... .......... .......... .......... 89%  146M 0s\n 10750K .......... .......... .......... .......... .......... 89%  155M 0s\n 10800K .......... .......... .......... .......... .......... 89%  711M 0s\n 10850K .......... .......... .......... .......... .......... 90%  129M 0s\n 10900K .......... .......... .......... .......... .......... 90%  128M 0s\n 10950K .......... .......... .......... .......... .......... 91%  239M 0s\n 11000K .......... .......... .......... .......... .......... 91%  124M 0s\n 11050K .......... .......... .......... .......... .......... 91%  654M 0s\n 11100K .......... .......... .......... .......... .......... 92%  121M 0s\n 11150K .......... .......... .......... .......... .......... 92%  477M 0s\n 11200K .......... .......... .......... .......... .......... 93%  165M 0s\n 11250K .......... .......... .......... .......... .......... 93%  128M 0s\n 11300K .......... .......... .......... .......... .......... 94%  749M 0s\n 11350K .......... .......... .......... .......... .......... 94%  263M 0s\n 11400K .......... .......... .......... .......... .......... 94%  140M 0s\n 11450K .......... .......... .......... .......... .......... 95%  211M 0s\n 11500K .......... .......... .......... .......... .......... 95%  768M 0s\n 11550K .......... .......... .......... .......... .......... 96%  128M 0s\n 11600K .......... .......... .......... .......... .......... 96%  182M 0s\n 11650K .......... .......... .......... .......... .......... 96%  270M 0s\n 11700K .......... .......... .......... .......... .......... 97%  172M 0s\n 11750K .......... .......... .......... .......... .......... 97%  855M 0s\n 11800K .......... .......... .......... .......... .......... 98%  180M 0s\n 11850K .......... .......... .......... .......... .......... 98%  189M 0s\n 11900K .......... .......... .......... .......... .......... 99%  198M 0s\n 11950K .......... .......... .......... .......... .......... 99%  103M 0s\n 12000K .......... .......... .......... .......... .......... 99%  861M 0s\n 12050K .......... ..........                                 100%  774M=0.2s\n\n2025-03-23 22:41:03 (47.8 MB/s) - ‘/home/mmohamed/test/ref.fa’ saved [12359807/12359807]\n```\n\n\n:::\n:::\n\n\n\n\n#### Step 2: Convert BAM to CRAM\n\nUse `srun` and `apptainer exec` to run commands inside the containerized environment. Bind directories to the container using the `--bind` option, and set the `APPTAINER_CACHEDIR` to a writable directory for caching the container image.\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nmodule load ris apptainer && \\\nexport APPTAINER_CACHEDIR=/scratch2/fs1/dspencer/mohamed/.apptainer-cache && \\\nsrun --nodelist=c2-bigmem-002 \\\n    apptainer exec \\\n    --bind \"/home/mmohamed:/home/mmohamed,/storage2/fs1/dspencer/Active:/storage2/fs1/dspencer/Active\" \\\n    docker://ghcr.io/dhslab/docker-baseimage:250222 \\\n    samtools view -C -T ~/test/ref.fa -o ~/test/test.cram ~/test/test.bam\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\nINFO:    Converting OCI blobs to SIF format\nINFO:    Starting build...\nCopying blob sha256:846c0b181fff0c667d9444f8378e8fcfa13116da8d308bf21673f7e4bea8d580\nCopying blob sha256:7bfdaaec019c2b24b97d39f9e6103f21e4676067a6d054c064c8ec3a6c1bb3f8\nCopying blob sha256:ac7402f41e7ceb8b7644ca179866beda2d04192f8ef0b7f7ca9ddd3c6d195faf\nCopying blob sha256:e82612e3cdf7b3d3c52c5c663221d58f3f9be76149b4039df4c740ea1843fc6d\nCopying blob sha256:a7ece9657ae26a5dc1db5579ea151d7155e1cdddd59e2e58f5dbbf8f0f4092b8\nCopying blob sha256:004ba9dbaacc4b2ff393e8d480245df62468c0487c8913fa9f137ee941fe13e5\nCopying blob sha256:a1823ed13177db4b5dfe366f94863499c0dbdac2186c005237f1bb04027aa0ea\nCopying blob sha256:a9473c9d37a92158affe9a2b2b86630e6fbd70b791688be7e8881132e7c3c24a\nCopying config sha256:24f6684f0a62f26f3d6d572bbf52c426b34a03d73e3e73dcb170722ddf88e7c5\nWriting manifest to image destination\n2025/03/23 22:51:52  info unpack layer: sha256:846c0b181fff0c667d9444f8378e8fcfa13116da8d308bf21673f7e4bea8d580\n2025/03/23 22:51:53  info unpack layer: sha256:e82612e3cdf7b3d3c52c5c663221d58f3f9be76149b4039df4c740ea1843fc6d\n2025/03/23 22:51:56  warn rootless{usr/lib/x86_64-linux-gnu/gstreamer1.0/gstreamer-1.0/gst-ptp-helper} ignoring (usually) harmless EPERM on setxattr \"security.capability\"\n2025/03/23 22:52:02  info unpack layer: sha256:004ba9dbaacc4b2ff393e8d480245df62468c0487c8913fa9f137ee941fe13e5\n2025/03/23 22:52:02  info unpack layer: sha256:ac7402f41e7ceb8b7644ca179866beda2d04192f8ef0b7f7ca9ddd3c6d195faf\n2025/03/23 22:52:02  info unpack layer: sha256:7bfdaaec019c2b24b97d39f9e6103f21e4676067a6d054c064c8ec3a6c1bb3f8\n2025/03/23 22:52:02  info unpack layer: sha256:a7ece9657ae26a5dc1db5579ea151d7155e1cdddd59e2e58f5dbbf8f0f4092b8\n2025/03/23 22:52:17  info unpack layer: sha256:a1823ed13177db4b5dfe366f94863499c0dbdac2186c005237f1bb04027aa0ea\n2025/03/23 22:52:20  info unpack layer: sha256:a9473c9d37a92158affe9a2b2b86630e6fbd70b791688be7e8881132e7c3c24a\nINFO:    Creating SIF file...\n```\n\n\n:::\n:::\n\n\n\n\n#### Step 3: Verify the CRAM File\n\nCheck the contents of the CRAM file to ensure the conversion was successful:\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nmodule load ris apptainer && \\\nexport APPTAINER_CACHEDIR=/scratch2/fs1/dspencer/mohamed/.apptainer-cache && \\\nsrun --nodelist=c2-bigmem-002 \\\n    apptainer exec \\\n    --bind \"/home/mmohamed:/home/mmohamed,/storage2/fs1/dspencer/Active:/storage2/fs1/dspencer/Active\" \\\n    docker://ghcr.io/dhslab/docker-baseimage:250222 \\\n    samtools view ~/test/test.cram | head -n 1\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\nINFO:    Using cached SIF image\nSRR1822153.3807593\t99\tI\t2\t11\t12S23M1D20M1D6M15S\t=\t34\t121\tCCCACACCCACACACACCACACCCACACACACACAACCACCCCCCACCCAACACCCACCCAAACCAAACACAAACC\tAAAAAAFFF<FFFFF<F..<FF<FFA)A.F<FAF.FF...)<<<)..)<))))AF))<FF<A.)F.<A.FFF7.77\tAS:i:58\tXS:i:52\tXN:i:0\tXM:i:5\tXO:i:2\tXG:i:2\tYS:i:140\tYT:Z:CP\tMD:Z:18C4^C5A2A3A1C5^A6\tNM:i:7\n```\n\n\n:::\n:::\n\n\n\n\n### Additional Notes\n\n- Apptainer supports multiple execution methods, such as `apptainer shell`, `apptainer run`, or directly running from a Docker image (`docker://...`) or a local `.sif` file (e.g., `apptainer exec /path/to/image.sif ...`).\n- Differences exist between Apptainer and Docker in handling bind mounts and environment variables. Refer to the [Apptainer documentation](https://apptainer.org/docs/user/main/) for more details.\n\n---\n\n## Running a Container Job\n\nThis section explains how to run containerized jobs using other container technologies on the Compute2 SLURM cluster.\n\n...content for running container jobs...\n\n---\n\n## Running a JupyterLab Server\n\nSet up and use a JupyterLab server on the Compute2 SLURM cluster for interactive data analysis and visualization.\n\n...content for running JupyterLab server...\n\n---\n\n## Running an RStudio Server\n\nLearn how to set up and use an RStudio server on the Compute2 SLURM cluster for statistical computing and graphics.\n\n...content for running RStudio server...\n\n---\n\n### Additional Resources\n\nFor more detailed guides and advanced workflows, explore the following:\n\n- [Module System]()\n- [Containers]()\n- [Spack](/docs/spack/index.qmd)\n- [JupyterLab]()\n- [RStudio]()\n- [VSCode Remote]()",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}