{"title":"Quick Start Guide","markdown":{"yaml":{"title":"Quick Start Guide","engine":"knitr","execute":{"freeze":false}},"headingText":"Setting Up Your Environment","containsRefs":false,"markdown":"\n\n\nThis section will guide you through the steps to set up your environment, load modules, and verify your setup. Follow these steps to ensure you are ready to use the Compute2 SLURM cluster effectively.\n\n### Launch an Interactive Session\n\nTo begin, launch an interactive SLURM session. This ensures that you are not running heavy workloads on the login node.\n\n```bash\nsrun --time=\"4:00:00\" --nodes=1 --ntasks=4 --mem=24G --pty /bin/bash\n```\n\n### Configure Your Environment\n\n#### Set Up the Module Path\n\nExport the custom module path to include user-installed environments:\n\n```bash\nexport MODULEPATH=/storage2/fs1/dspencer/Active/spencerlab/apps/modules/modulefiles:$MODULEPATH\n```\n\n#### Load Core Tools\n\nLoad the `basetools` module to access the core tools used in the lab:\n\n```bash\nmodule load basetools\n```\n\n### Automate Your Setup (Optional)\n\nTo streamline your workflow, you can add the setup commands to your `.bashrc` file. This ensures that the environment is configured automatically upon login.\n\n#### Example `.bashrc` Configuration\n\n```bash\n# Export the custom module path\nexport MODULEPATH=/storage2/fs1/dspencer/Active/spencerlab/apps/modules/modulefiles:$MODULEPATH\n\n# Conditionally load 'basetools' when using VS Code Remote-SSH\nif [[ -n \"$VSCODE_IPC_HOOK_CLI\" ]]; then\n  echo \"Detected VS Code Remote-SSH session. Loading 'basetools' module...\"\n  module load basetools\nfi\n```\n\n### Verify Your Setup\n\nFinally, verify that your environment is correctly configured by checking the version of a core tool like `samtools`:\n\n```{bash}\nsamtools --version\n```\n\nWith the `basetools` module loaded, you should now have access to most of the tools available in the Docker base image, as well as R and Python with commonly used packages.\n\n---\n\n## Apptainer Jobs\n\nApptainer is a container technology designed for high-performance computing environments. It allows you to run containerized applications on the Compute2 SLURM cluster. This section demonstrates how to use Apptainer for a common bioinformatics task.\n\n### Example: Converting BAM to CRAM Using Apptainer\n\nThis example shows how to convert a BAM file to a CRAM file using `samtools` within an Apptainer container.\n\n#### Step 1: Download Input Files\n\nFirst, download the required input files (a BAM file and a reference genome):\n\n```{bash}\nmkdir -p ~/test\nwget -O ~/test/test.bam https://raw.githubusercontent.com/m-mahgoub/bam2fastq/f9163d85ad8912929b242a08a21d505d84776337/data/SPT5_T0_rep1.sorted.bam\nwget -O ~/test/ref.fa https://raw.githubusercontent.com/m-mahgoub/bam2fastq/refs/heads/main/data/genome.fa\n```\n\n#### Step 2: Convert BAM to CRAM\n\nUse `srun` and `apptainer exec` to run commands inside the containerized environment. Bind directories to the container using the `--bind` option, and set the `APPTAINER_CACHEDIR` to a writable directory for caching the container image.\n\n```{bash}\nmodule load ris apptainer && \\\nexport APPTAINER_CACHEDIR=/scratch2/fs1/dspencer/mohamed/.apptainer-cache && \\\nsrun --nodelist=c2-bigmem-002 \\\n    apptainer exec \\\n    --bind \"/home/mmohamed:/home/mmohamed,/storage2/fs1/dspencer/Active:/storage2/fs1/dspencer/Active\" \\\n    docker://ghcr.io/dhslab/docker-baseimage:250222 \\\n    samtools view -C -T ~/test/ref.fa -o ~/test/test.cram ~/test/test.bam\n```\n\n#### Step 3: Verify the CRAM File\n\nCheck the contents of the CRAM file to ensure the conversion was successful:\n\n```{bash}\nmodule load ris apptainer && \\\nexport APPTAINER_CACHEDIR=/scratch2/fs1/dspencer/mohamed/.apptainer-cache && \\\nsrun --nodelist=c2-bigmem-002 \\\n    apptainer exec \\\n    --bind \"/home/mmohamed:/home/mmohamed,/storage2/fs1/dspencer/Active:/storage2/fs1/dspencer/Active\" \\\n    docker://ghcr.io/dhslab/docker-baseimage:250222 \\\n    samtools view ~/test/test.cram | head -n 1\n```\n\n### Additional Notes\n\n- Apptainer supports multiple execution methods, such as `apptainer shell`, `apptainer run`, or directly running from a Docker image (`docker://...`) or a local `.sif` file (e.g., `apptainer exec /path/to/image.sif ...`).\n- Differences exist between Apptainer and Docker in handling bind mounts and environment variables. Refer to the [Apptainer documentation](https://apptainer.org/docs/user/main/) for more details.\n\n---\n\n## Running a Container Job\n\nThis section explains how to run containerized jobs using other container technologies on the Compute2 SLURM cluster.\n\n...content for running container jobs...\n\n---\n\n## Running a JupyterLab Server\n\nSet up and use a JupyterLab server on the Compute2 SLURM cluster for interactive data analysis and visualization.\n\n...content for running JupyterLab server...\n\n---\n\n## Running an RStudio Server\n\nLearn how to set up and use an RStudio server on the Compute2 SLURM cluster for statistical computing and graphics.\n\n...content for running RStudio server...\n\n---\n\n### Additional Resources\n\nFor more detailed guides and advanced workflows, explore the following:\n\n- [Module System]()\n- [Containers]()\n- [Spack](/docs/spack/index.qmd)\n- [JupyterLab]()\n- [RStudio]()\n- [VSCode Remote]()","srcMarkdownNoYaml":"\n\n## Setting Up Your Environment\n\nThis section will guide you through the steps to set up your environment, load modules, and verify your setup. Follow these steps to ensure you are ready to use the Compute2 SLURM cluster effectively.\n\n### Launch an Interactive Session\n\nTo begin, launch an interactive SLURM session. This ensures that you are not running heavy workloads on the login node.\n\n```bash\nsrun --time=\"4:00:00\" --nodes=1 --ntasks=4 --mem=24G --pty /bin/bash\n```\n\n### Configure Your Environment\n\n#### Set Up the Module Path\n\nExport the custom module path to include user-installed environments:\n\n```bash\nexport MODULEPATH=/storage2/fs1/dspencer/Active/spencerlab/apps/modules/modulefiles:$MODULEPATH\n```\n\n#### Load Core Tools\n\nLoad the `basetools` module to access the core tools used in the lab:\n\n```bash\nmodule load basetools\n```\n\n### Automate Your Setup (Optional)\n\nTo streamline your workflow, you can add the setup commands to your `.bashrc` file. This ensures that the environment is configured automatically upon login.\n\n#### Example `.bashrc` Configuration\n\n```bash\n# Export the custom module path\nexport MODULEPATH=/storage2/fs1/dspencer/Active/spencerlab/apps/modules/modulefiles:$MODULEPATH\n\n# Conditionally load 'basetools' when using VS Code Remote-SSH\nif [[ -n \"$VSCODE_IPC_HOOK_CLI\" ]]; then\n  echo \"Detected VS Code Remote-SSH session. Loading 'basetools' module...\"\n  module load basetools\nfi\n```\n\n### Verify Your Setup\n\nFinally, verify that your environment is correctly configured by checking the version of a core tool like `samtools`:\n\n```{bash}\nsamtools --version\n```\n\nWith the `basetools` module loaded, you should now have access to most of the tools available in the Docker base image, as well as R and Python with commonly used packages.\n\n---\n\n## Apptainer Jobs\n\nApptainer is a container technology designed for high-performance computing environments. It allows you to run containerized applications on the Compute2 SLURM cluster. This section demonstrates how to use Apptainer for a common bioinformatics task.\n\n### Example: Converting BAM to CRAM Using Apptainer\n\nThis example shows how to convert a BAM file to a CRAM file using `samtools` within an Apptainer container.\n\n#### Step 1: Download Input Files\n\nFirst, download the required input files (a BAM file and a reference genome):\n\n```{bash}\nmkdir -p ~/test\nwget -O ~/test/test.bam https://raw.githubusercontent.com/m-mahgoub/bam2fastq/f9163d85ad8912929b242a08a21d505d84776337/data/SPT5_T0_rep1.sorted.bam\nwget -O ~/test/ref.fa https://raw.githubusercontent.com/m-mahgoub/bam2fastq/refs/heads/main/data/genome.fa\n```\n\n#### Step 2: Convert BAM to CRAM\n\nUse `srun` and `apptainer exec` to run commands inside the containerized environment. Bind directories to the container using the `--bind` option, and set the `APPTAINER_CACHEDIR` to a writable directory for caching the container image.\n\n```{bash}\nmodule load ris apptainer && \\\nexport APPTAINER_CACHEDIR=/scratch2/fs1/dspencer/mohamed/.apptainer-cache && \\\nsrun --nodelist=c2-bigmem-002 \\\n    apptainer exec \\\n    --bind \"/home/mmohamed:/home/mmohamed,/storage2/fs1/dspencer/Active:/storage2/fs1/dspencer/Active\" \\\n    docker://ghcr.io/dhslab/docker-baseimage:250222 \\\n    samtools view -C -T ~/test/ref.fa -o ~/test/test.cram ~/test/test.bam\n```\n\n#### Step 3: Verify the CRAM File\n\nCheck the contents of the CRAM file to ensure the conversion was successful:\n\n```{bash}\nmodule load ris apptainer && \\\nexport APPTAINER_CACHEDIR=/scratch2/fs1/dspencer/mohamed/.apptainer-cache && \\\nsrun --nodelist=c2-bigmem-002 \\\n    apptainer exec \\\n    --bind \"/home/mmohamed:/home/mmohamed,/storage2/fs1/dspencer/Active:/storage2/fs1/dspencer/Active\" \\\n    docker://ghcr.io/dhslab/docker-baseimage:250222 \\\n    samtools view ~/test/test.cram | head -n 1\n```\n\n### Additional Notes\n\n- Apptainer supports multiple execution methods, such as `apptainer shell`, `apptainer run`, or directly running from a Docker image (`docker://...`) or a local `.sif` file (e.g., `apptainer exec /path/to/image.sif ...`).\n- Differences exist between Apptainer and Docker in handling bind mounts and environment variables. Refer to the [Apptainer documentation](https://apptainer.org/docs/user/main/) for more details.\n\n---\n\n## Running a Container Job\n\nThis section explains how to run containerized jobs using other container technologies on the Compute2 SLURM cluster.\n\n...content for running container jobs...\n\n---\n\n## Running a JupyterLab Server\n\nSet up and use a JupyterLab server on the Compute2 SLURM cluster for interactive data analysis and visualization.\n\n...content for running JupyterLab server...\n\n---\n\n## Running an RStudio Server\n\nLearn how to set up and use an RStudio server on the Compute2 SLURM cluster for statistical computing and graphics.\n\n...content for running RStudio server...\n\n---\n\n### Additional Resources\n\nFor more detailed guides and advanced workflows, explore the following:\n\n- [Module System]()\n- [Containers]()\n- [Spack](/docs/spack/index.qmd)\n- [JupyterLab]()\n- [RStudio]()\n- [VSCode Remote]()"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":true,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.42","theme":["cosmo","brand"],"title":"Quick Start Guide"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}