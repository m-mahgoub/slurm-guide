<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Quick Start Guide – SLURM User Guide</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-1956fa4f3b836d20234934491b753c84.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">SLURM User Guide</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../content/quick-start/index.html" aria-current="page"> 
<span class="menu-text">Quick Start</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../content/guide/index.html"> 
<span class="menu-text">Guide</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#setting-up-your-environment" id="toc-setting-up-your-environment" class="nav-link active" data-scroll-target="#setting-up-your-environment">Setting Up Your Environment</a>
  <ul class="collapse">
  <li><a href="#launch-an-interactive-session" id="toc-launch-an-interactive-session" class="nav-link" data-scroll-target="#launch-an-interactive-session">Launch an Interactive Session</a></li>
  <li><a href="#configure-your-environment" id="toc-configure-your-environment" class="nav-link" data-scroll-target="#configure-your-environment">Configure Your Environment</a></li>
  <li><a href="#automate-your-setup-optional" id="toc-automate-your-setup-optional" class="nav-link" data-scroll-target="#automate-your-setup-optional">Automate Your Setup (Optional)</a></li>
  <li><a href="#verify-your-setup" id="toc-verify-your-setup" class="nav-link" data-scroll-target="#verify-your-setup">Verify Your Setup</a></li>
  </ul></li>
  <li><a href="#apptainer-jobs" id="toc-apptainer-jobs" class="nav-link" data-scroll-target="#apptainer-jobs">Apptainer Jobs</a>
  <ul class="collapse">
  <li><a href="#example-converting-bam-to-cram-using-apptainer" id="toc-example-converting-bam-to-cram-using-apptainer" class="nav-link" data-scroll-target="#example-converting-bam-to-cram-using-apptainer">Example: Converting BAM to CRAM Using Apptainer</a></li>
  <li><a href="#additional-notes" id="toc-additional-notes" class="nav-link" data-scroll-target="#additional-notes">Additional Notes</a></li>
  </ul></li>
  <li><a href="#running-a-container-job" id="toc-running-a-container-job" class="nav-link" data-scroll-target="#running-a-container-job">Running a Container Job</a></li>
  <li><a href="#running-a-jupyterlab-server" id="toc-running-a-jupyterlab-server" class="nav-link" data-scroll-target="#running-a-jupyterlab-server">Running a JupyterLab Server</a></li>
  <li><a href="#running-an-rstudio-server" id="toc-running-an-rstudio-server" class="nav-link" data-scroll-target="#running-an-rstudio-server">Running an RStudio Server</a>
  <ul class="collapse">
  <li><a href="#additional-resources" id="toc-additional-resources" class="nav-link" data-scroll-target="#additional-resources">Additional Resources</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Quick Start Guide</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="setting-up-your-environment" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-your-environment">Setting Up Your Environment</h2>
<p>This section will guide you through the steps to set up your environment, load modules, and verify your setup. Follow these steps to ensure you are ready to use the Compute2 SLURM cluster effectively.</p>
<section id="launch-an-interactive-session" class="level3">
<h3 class="anchored" data-anchor-id="launch-an-interactive-session">Launch an Interactive Session</h3>
<p>To begin, launch an interactive SLURM session. This ensures that you are not running heavy workloads on the login node.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">srun</span> <span class="at">--time</span><span class="op">=</span><span class="st">"4:00:00"</span> <span class="at">--nodes</span><span class="op">=</span>1 <span class="at">--ntasks</span><span class="op">=</span>4 <span class="at">--mem</span><span class="op">=</span>24G <span class="at">--pty</span> /bin/bash</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="configure-your-environment" class="level3">
<h3 class="anchored" data-anchor-id="configure-your-environment">Configure Your Environment</h3>
<section id="set-up-the-module-path" class="level4">
<h4 class="anchored" data-anchor-id="set-up-the-module-path">Set Up the Module Path</h4>
<p>Export the custom module path to include user-installed environments:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">MODULEPATH</span><span class="op">=</span>/storage2/fs1/dspencer/Active/spencerlab/apps/modules/modulefiles:<span class="va">$MODULEPATH</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="load-core-tools" class="level4">
<h4 class="anchored" data-anchor-id="load-core-tools">Load Core Tools</h4>
<p>Load the <code>labtools</code> module to access the core tools used in the lab:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load labtools</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="automate-your-setup-optional" class="level3">
<h3 class="anchored" data-anchor-id="automate-your-setup-optional">Automate Your Setup (Optional)</h3>
<p>To streamline your workflow, you can add the setup commands to your <code>.bashrc</code> file. This ensures that the environment is configured automatically upon login.</p>
<section id="example-.bashrc-configuration" class="level4">
<h4 class="anchored" data-anchor-id="example-.bashrc-configuration">Example <code>.bashrc</code> Configuration</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Export the custom module path</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">MODULEPATH</span><span class="op">=</span>/storage2/fs1/dspencer/Active/spencerlab/apps/modules/modulefiles:<span class="va">$MODULEPATH</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Conditionally load 'labtools' when using VS Code Remote-SSH</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">[[</span> <span class="ot">-n</span> <span class="st">"</span><span class="va">$VSCODE_IPC_HOOK_CLI</span><span class="st">"</span> <span class="kw">]];</span> <span class="cf">then</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="bu">echo</span> <span class="st">"Detected VS Code Remote-SSH session. Loading 'labtools' module..."</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="ex">module</span> load labtools</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="verify-your-setup" class="level3">
<h3 class="anchored" data-anchor-id="verify-your-setup">Verify Your Setup</h3>
<p>Finally, verify that your environment is correctly configured by checking the version of a core tool like <code>samtools</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">samtools</span> <span class="at">--version</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>samtools 1.19.2
Using htslib 1.19.1
Copyright (C) 2024 Genome Research Ltd.

Samtools compilation details:
    Features:       build=configure curses=yes 
    CC:             /scratch2/fs1/sleong/Active/compute2/ris/thpc/linux/software/spack/v0.23/lib/spack/env/gcc/gcc
    CPPFLAGS:       
    CFLAGS:         -Wall -g -O2
    LDFLAGS:        
    HTSDIR:         
    LIBS:           
    CURSES_LIB:     -lncursesw -ltinfow

HTSlib compilation details:
    Features:       build=configure libcurl=yes S3=yes GCS=yes libdeflate=yes lzma=yes bzip2=yes plugins=no htscodecs=1.6.0
    CC:             /scratch2/fs1/sleong/Active/compute2/ris/thpc/linux/software/spack/v0.23/lib/spack/env/gcc/gcc
    CPPFLAGS:       
    CFLAGS:         -Wall -g -O2 -fvisibility=hidden
    LDFLAGS:        -fvisibility=hidden 

HTSlib URL scheme handlers present:
    built-in:    preload, data, file
    S3 Multipart Upload:     s3w, s3w+https, s3w+http
    Amazon S3:   s3+https, s3+http, s3
    Google Cloud Storage:    gs+http, gs+https, gs
    libcurl:     imaps, pop3, gophers, http, smb, gopher, ftps, imap, smtp, smtps, rtsp, ftp, telnet, mqtt, https, smbs, tftp, pop3s, dict
    crypt4gh-needed:     crypt4gh
    mem:     mem</code></pre>
</div>
</div>
<p>With the <code>labtools</code> module loaded, you should now have access to most of the tools available in the Docker base image, as well as R and Python with commonly used packages.</p>
<hr>
</section>
</section>
<section id="apptainer-jobs" class="level2">
<h2 class="anchored" data-anchor-id="apptainer-jobs">Apptainer Jobs</h2>
<p>Apptainer is a container technology designed for high-performance computing environments. It allows you to run containerized applications on the Compute2 SLURM cluster. This section demonstrates how to use Apptainer for a common bioinformatics task.</p>
<section id="example-converting-bam-to-cram-using-apptainer" class="level3">
<h3 class="anchored" data-anchor-id="example-converting-bam-to-cram-using-apptainer">Example: Converting BAM to CRAM Using Apptainer</h3>
<p>This example shows how to convert a BAM file to a CRAM file using <code>samtools</code> within an Apptainer container.</p>
<section id="step-1-download-input-files" class="level4">
<h4 class="anchored" data-anchor-id="step-1-download-input-files">Step 1: Download Input Files</h4>
<p>First, download the required input files (a BAM file and a reference genome):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> ~/test</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> <span class="at">-O</span> ~/test/test.bam https://raw.githubusercontent.com/m-mahgoub/bam2fastq/f9163d85ad8912929b242a08a21d505d84776337/data/SPT5_T0_rep1.sorted.bam</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> <span class="at">-O</span> ~/test/ref.fa https://raw.githubusercontent.com/m-mahgoub/bam2fastq/refs/heads/main/data/genome.fa</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>--2025-03-23 22:41:02--  https://raw.githubusercontent.com/m-mahgoub/bam2fastq/f9163d85ad8912929b242a08a21d505d84776337/data/SPT5_T0_rep1.sorted.bam
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.111.133, 185.199.110.133, 185.199.108.133, ...
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.111.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 7446300 (7.1M) [application/octet-stream]
Saving to: ‘/home/mmohamed/test/test.bam’

     0K .......... .......... .......... .......... ..........  0% 1.37M 5s
    50K .......... .......... .......... .......... ..........  1% 1.93M 4s
   100K .......... .......... .......... .......... ..........  2% 7.04M 3s
   150K .......... .......... .......... .......... ..........  2% 8.37M 3s
   200K .......... .......... .......... .......... ..........  3% 3.00M 3s
   250K .......... .......... .......... .......... ..........  4% 11.3M 2s
   300K .......... .......... .......... .......... ..........  4% 11.7M 2s
   350K .......... .......... .......... .......... ..........  5% 15.5M 2s
   400K .......... .......... .......... .......... ..........  6% 12.8M 2s
   450K .......... .......... .......... .......... ..........  6% 4.10M 2s
   500K .......... .......... .......... .......... ..........  7% 19.0M 1s
   550K .......... .......... .......... .......... ..........  8% 18.9M 1s
   600K .......... .......... .......... .......... ..........  8% 25.7M 1s
   650K .......... .......... .......... .......... ..........  9% 27.4M 1s
   700K .......... .......... .......... .......... .......... 10% 31.8M 1s
   750K .......... .......... .......... .......... .......... 11% 21.4M 1s
   800K .......... .......... .......... .......... .......... 11% 24.6M 1s
   850K .......... .......... .......... .......... .......... 12% 47.5M 1s
   900K .......... .......... .......... .......... .......... 13% 25.8M 1s
   950K .......... .......... .......... .......... .......... 13% 59.0M 1s
  1000K .......... .......... .......... .......... .......... 14% 4.52M 1s
  1050K .......... .......... .......... .......... .......... 15% 44.4M 1s
  1100K .......... .......... .......... .......... .......... 15% 22.6M 1s
  1150K .......... .......... .......... .......... .......... 16% 96.8M 1s
  1200K .......... .......... .......... .......... .......... 17% 26.3M 1s
  1250K .......... .......... .......... .......... .......... 17% 34.6M 1s
  1300K .......... .......... .......... .......... .......... 18% 60.9M 1s
  1350K .......... .......... .......... .......... .......... 19% 52.2M 1s
  1400K .......... .......... .......... .......... .......... 19% 50.1M 1s
  1450K .......... .......... .......... .......... .......... 20% 76.4M 1s
  1500K .......... .......... .......... .......... .......... 21% 63.6M 1s
  1550K .......... .......... .......... .......... .......... 22% 36.6M 1s
  1600K .......... .......... .......... .......... .......... 22% 49.0M 1s
  1650K .......... .......... .......... .......... .......... 23% 40.0M 1s
  1700K .......... .......... .......... .......... .......... 24%  694M 1s
  1750K .......... .......... .......... .......... .......... 24% 48.7M 0s
  1800K .......... .......... .......... .......... .......... 25% 59.5M 0s
  1850K .......... .......... .......... .......... .......... 26% 49.1M 0s
  1900K .......... .......... .......... .......... .......... 26%  852M 0s
  1950K .......... .......... .......... .......... .......... 27% 67.3M 0s
  2000K .......... .......... .......... .......... .......... 28% 4.69M 0s
  2050K .......... .......... .......... .......... .......... 28%  104M 0s
  2100K .......... .......... .......... .......... .......... 29% 48.2M 0s
  2150K .......... .......... .......... .......... .......... 30%  887M 0s
  2200K .......... .......... .......... .......... .......... 30% 53.8M 0s
  2250K .......... .......... .......... .......... .......... 31% 39.0M 0s
  2300K .......... .......... .......... .......... .......... 32%  146M 0s
  2350K .......... .......... .......... .......... .......... 33%  598M 0s
  2400K .......... .......... .......... .......... .......... 33% 31.4M 0s
  2450K .......... .......... .......... .......... .......... 34%  151M 0s
  2500K .......... .......... .......... .......... .......... 35% 67.0M 0s
  2550K .......... .......... .......... .......... .......... 35% 68.5M 0s
  2600K .......... .......... .......... .......... .......... 36%  809M 0s
  2650K .......... .......... .......... .......... .......... 37% 66.1M 0s
  2700K .......... .......... .......... .......... .......... 37% 82.7M 0s
  2750K .......... .......... .......... .......... .......... 38% 78.1M 0s
  2800K .......... .......... .......... .......... .......... 39% 87.1M 0s
  2850K .......... .......... .......... .......... .......... 39%  845M 0s
  2900K .......... .......... .......... .......... .......... 40% 66.8M 0s
  2950K .......... .......... .......... .......... .......... 41%  102M 0s
  3000K .......... .......... .......... .......... .......... 41% 87.7M 0s
  3050K .......... .......... .......... .......... .......... 42%  685M 0s
  3100K .......... .......... .......... .......... .......... 43% 86.8M 0s
  3150K .......... .......... .......... .......... .......... 44% 82.8M 0s
  3200K .......... .......... .......... .......... .......... 44% 92.1M 0s
  3250K .......... .......... .......... .......... .......... 45% 81.3M 0s
  3300K .......... .......... .......... .......... .......... 46%  841M 0s
  3350K .......... .......... .......... .......... .......... 46%  106M 0s
  3400K .......... .......... .......... .......... .......... 47% 77.0M 0s
  3450K .......... .......... .......... .......... .......... 48%  130M 0s
  3500K .......... .......... .......... .......... .......... 48%  103M 0s
  3550K .......... .......... .......... .......... .......... 49% 98.4M 0s
  3600K .......... .......... .......... .......... .......... 50%  680M 0s
  3650K .......... .......... .......... .......... .......... 50%  106M 0s
  3700K .......... .......... .......... .......... .......... 51% 90.5M 0s
  3750K .......... .......... .......... .......... .......... 52%  110M 0s
  3800K .......... .......... .......... .......... .......... 52%  848M 0s
  3850K .......... .......... .......... .......... .......... 53%  115M 0s
  3900K .......... .......... .......... .......... .......... 54%  101M 0s
  3950K .......... .......... .......... .......... .......... 55%  127M 0s
  4000K .......... .......... .......... .......... .......... 55% 5.03M 0s
  4050K .......... .......... .......... .......... .......... 56%  467M 0s
  4100K .......... .......... .......... .......... .......... 57%  203M 0s
  4150K .......... .......... .......... .......... .......... 57%  115M 0s
  4200K .......... .......... .......... .......... .......... 58%  146M 0s
  4250K .......... .......... .......... .......... .......... 59%  461M 0s
  4300K .......... .......... .......... .......... .......... 59%  116M 0s
  4350K .......... .......... .......... .......... .......... 60%  139M 0s
  4400K .......... .......... .......... .......... .......... 61%  109M 0s
  4450K .......... .......... .......... .......... .......... 61%  135M 0s
  4500K .......... .......... .......... .......... .......... 62%  892M 0s
  4550K .......... .......... .......... .......... .......... 63% 55.4M 0s
  4600K .......... .......... .......... .......... .......... 63%  282M 0s
  4650K .......... .......... .......... .......... .......... 64%  148M 0s
  4700K .......... .......... .......... .......... .......... 65%  549M 0s
  4750K .......... .......... .......... .......... .......... 66%  130M 0s
  4800K .......... .......... .......... .......... .......... 66% 57.1M 0s
  4850K .......... .......... .......... .......... .......... 67%  203M 0s
  4900K .......... .......... .......... .......... .......... 68%  165M 0s
  4950K .......... .......... .......... .......... .......... 68%  791M 0s
  5000K .......... .......... .......... .......... .......... 69%  124M 0s
  5050K .......... .......... .......... .......... .......... 70%  150M 0s
  5100K .......... .......... .......... .......... .......... 70%  137M 0s
  5150K .......... .......... .......... .......... .......... 71%  136M 0s
  5200K .......... .......... .......... .......... .......... 72%  179M 0s
  5250K .......... .......... .......... .......... .......... 72%  666M 0s
  5300K .......... .......... .......... .......... .......... 73%  156M 0s
  5350K .......... .......... .......... .......... .......... 74%  128M 0s
  5400K .......... .......... .......... .......... .......... 74%  194M 0s
  5450K .......... .......... .......... .......... .......... 75%  474M 0s
  5500K .......... .......... .......... .......... .......... 76%  139M 0s
  5550K .......... .......... .......... .......... .......... 77%  148M 0s
  5600K .......... .......... .......... .......... .......... 77%  155M 0s
  5650K .......... .......... .......... .......... .......... 78%  232M 0s
  5700K .......... .......... .......... .......... .......... 79%  337M 0s
  5750K .......... .......... .......... .......... .......... 79%  182M 0s
  5800K .......... .......... .......... .......... .......... 80%  146M 0s
  5850K .......... .......... .......... .......... .......... 81%  153M 0s
  5900K .......... .......... .......... .......... .......... 81%  225M 0s
  5950K .......... .......... .......... .......... .......... 82%  405M 0s
  6000K .......... .......... .......... .......... .......... 83%  131M 0s
  6050K .......... .......... .......... .......... .......... 83% 93.1M 0s
  6100K .......... .......... .......... .......... .......... 84%  104M 0s
  6150K .......... .......... .......... .......... .......... 85%  267M 0s
  6200K .......... .......... .......... .......... .......... 85%  113M 0s
  6250K .......... .......... .......... .......... .......... 86% 71.2M 0s
  6300K .......... .......... .......... .......... .......... 87%  136M 0s
  6350K .......... .......... .......... .......... .......... 88% 70.7M 0s
  6400K .......... .......... .......... .......... .......... 88%  771M 0s
  6450K .......... .......... .......... .......... .......... 89%  150M 0s
  6500K .......... .......... .......... .......... .......... 90% 92.4M 0s
  6550K .......... .......... .......... .......... .......... 90%  133M 0s
  6600K .......... .......... .......... .......... .......... 91%  100M 0s
  6650K .......... .......... .......... .......... .......... 92%  308M 0s
  6700K .......... .......... .......... .......... .......... 92% 95.1M 0s
  6750K .......... .......... .......... .......... .......... 93%  110M 0s
  6800K .......... .......... .......... .......... .......... 94%  115M 0s
  6850K .......... .......... .......... .......... .......... 94%  828M 0s
  6900K .......... .......... .......... .......... .......... 95%  722M 0s
  6950K .......... .......... .......... .......... .......... 96% 61.2M 0s
  7000K .......... .......... .......... .......... .......... 96%  411M 0s
  7050K .......... .......... .......... .......... .......... 97% 5.09M 0s
  7100K .......... .......... .......... .......... .......... 98%  232M 0s
  7150K .......... .......... .......... .......... .......... 99% 88.7M 0s
  7200K .......... .......... .......... .......... .......... 99%  141M 0s
  7250K .......... .......... .                               100%  993M=0.2s

2025-03-23 22:41:02 (30.2 MB/s) - ‘/home/mmohamed/test/test.bam’ saved [7446300/7446300]

--2025-03-23 22:41:02--  https://raw.githubusercontent.com/m-mahgoub/bam2fastq/refs/heads/main/data/genome.fa
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.109.133, 185.199.111.133, 185.199.108.133, ...
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.109.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 12359807 (12M) [text/plain]
Saving to: ‘/home/mmohamed/test/ref.fa’

     0K .......... .......... .......... .......... ..........  0% 1.71M 7s
    50K .......... .......... .......... .......... ..........  0% 1.93M 6s
   100K .......... .......... .......... .......... ..........  1% 6.76M 5s
   150K .......... .......... .......... .......... ..........  1% 11.0M 4s
   200K .......... .......... .......... .......... ..........  2% 3.26M 4s
   250K .......... .......... .......... .......... ..........  2% 13.8M 3s
   300K .......... .......... .......... .......... ..........  2% 14.7M 3s
   350K .......... .......... .......... .......... ..........  3% 12.6M 3s
   400K .......... .......... .......... .......... ..........  3% 19.2M 2s
   450K .......... .......... .......... .......... ..........  4% 4.10M 2s
   500K .......... .......... .......... .......... ..........  4% 25.1M 2s
   550K .......... .......... .......... .......... ..........  4% 23.1M 2s
   600K .......... .......... .......... .......... ..........  5% 20.4M 2s
   650K .......... .......... .......... .......... ..........  5% 36.4M 2s
   700K .......... .......... .......... .......... ..........  6% 24.7M 2s
   750K .......... .......... .......... .......... ..........  6% 61.4M 2s
   800K .......... .......... .......... .......... ..........  7% 28.5M 2s
   850K .......... .......... .......... .......... ..........  7% 32.5M 1s
   900K .......... .......... .......... .......... ..........  7% 81.7M 1s
   950K .......... .......... .......... .......... ..........  8% 30.0M 1s
  1000K .......... .......... .......... .......... ..........  8% 4.77M 1s
  1050K .......... .......... .......... .......... ..........  9% 25.0M 1s
  1100K .......... .......... .......... .......... ..........  9% 94.9M 1s
  1150K .......... .......... .......... .......... ..........  9% 97.6M 1s
  1200K .......... .......... .......... .......... .......... 10% 41.1M 1s
  1250K .......... .......... .......... .......... .......... 10% 39.2M 1s
  1300K .......... .......... .......... .......... .......... 11% 51.0M 1s
  1350K .......... .......... .......... .......... .......... 11%  139M 1s
  1400K .......... .......... .......... .......... .......... 12% 42.6M 1s
  1450K .......... .......... .......... .......... .......... 12% 44.6M 1s
  1500K .......... .......... .......... .......... .......... 12% 54.5M 1s
  1550K .......... .......... .......... .......... .......... 13%  863M 1s
  1600K .......... .......... .......... .......... .......... 13% 34.5M 1s
  1650K .......... .......... .......... .......... .......... 14% 53.8M 1s
  1700K .......... .......... .......... .......... .......... 14% 82.8M 1s
  1750K .......... .......... .......... .......... .......... 14%  818M 1s
  1800K .......... .......... .......... .......... .......... 15% 49.0M 1s
  1850K .......... .......... .......... .......... .......... 15% 73.8M 1s
  1900K .......... .......... .......... .......... .......... 16% 59.8M 1s
  1950K .......... .......... .......... .......... .......... 16% 60.8M 1s
  2000K .......... .......... .......... .......... .......... 16%  708M 1s
  2050K .......... .......... .......... .......... .......... 17% 5.32M 1s
  2100K .......... .......... .......... .......... .......... 17% 54.3M 1s
  2150K .......... .......... .......... .......... .......... 18%  108M 1s
  2200K .......... .......... .......... .......... .......... 18% 35.0M 1s
  2250K .......... .......... .......... .......... .......... 19%  750M 1s
  2300K .......... .......... .......... .......... .......... 19% 79.4M 1s
  2350K .......... .......... .......... .......... .......... 19%  122M 1s
  2400K .......... .......... .......... .......... .......... 20% 57.2M 1s
  2450K .......... .......... .......... .......... .......... 20%  120M 1s
  2500K .......... .......... .......... .......... .......... 21%  800M 1s
  2550K .......... .......... .......... .......... .......... 21% 55.0M 1s
  2600K .......... .......... .......... .......... .......... 21%  139M 1s
  2650K .......... .......... .......... .......... .......... 22% 66.6M 1s
  2700K .......... .......... .......... .......... .......... 22%  789M 1s
  2750K .......... .......... .......... .......... .......... 23%  118M 1s
  2800K .......... .......... .......... .......... .......... 23% 65.0M 1s
  2850K .......... .......... .......... .......... .......... 24%  131M 1s
  2900K .......... .......... .......... .......... .......... 24% 67.3M 1s
  2950K .......... .......... .......... .......... .......... 24%  768M 1s
  3000K .......... .......... .......... .......... .......... 25%  144M 0s
  3050K .......... .......... .......... .......... .......... 25% 95.9M 0s
  3100K .......... .......... .......... .......... .......... 26% 95.2M 0s
  3150K .......... .......... .......... .......... .......... 26% 99.0M 0s
  3200K .......... .......... .......... .......... .......... 26% 65.3M 0s
  3250K .......... .......... .......... .......... .......... 27%  705M 0s
  3300K .......... .......... .......... .......... .......... 27%  226M 0s
  3350K .......... .......... .......... .......... .......... 28% 72.3M 0s
  3400K .......... .......... .......... .......... .......... 28%  206M 0s
  3450K .......... .......... .......... .......... .......... 28%  742M 0s
  3500K .......... .......... .......... .......... .......... 29%  107M 0s
  3550K .......... .......... .......... .......... .......... 29%  111M 0s
  3600K .......... .......... .......... .......... .......... 30%  107M 0s
  3650K .......... .......... .......... .......... .......... 30% 95.9M 0s
  3700K .......... .......... .......... .......... .......... 31%  852M 0s
  3750K .......... .......... .......... .......... .......... 31%  147M 0s
  3800K .......... .......... .......... .......... .......... 31%  123M 0s
  3850K .......... .......... .......... .......... .......... 32%  125M 0s
  3900K .......... .......... .......... .......... .......... 32%  772M 0s
  3950K .......... .......... .......... .......... .......... 33%  121M 0s
  4000K .......... .......... .......... .......... .......... 33%  124M 0s
  4050K .......... .......... .......... .......... .......... 33%  124M 0s
  4100K .......... .......... .......... .......... .......... 34% 5.88M 0s
  4150K .......... .......... .......... .......... .......... 34%  298M 0s
  4200K .......... .......... .......... .......... .......... 35%  240M 0s
  4250K .......... .......... .......... .......... .......... 35% 63.6M 0s
  4300K .......... .......... .......... .......... .......... 36%  362M 0s
  4350K .......... .......... .......... .......... .......... 36%  132M 0s
  4400K .......... .......... .......... .......... .......... 36%  880M 0s
  4450K .......... .......... .......... .......... .......... 37%  135M 0s
  4500K .......... .......... .......... .......... .......... 37% 50.2M 0s
  4550K .......... .......... .......... .......... .......... 38%  350M 0s
  4600K .......... .......... .......... .......... .......... 38%  665M 0s
  4650K .......... .......... .......... .......... .......... 38% 94.1M 0s
  4700K .......... .......... .......... .......... .......... 39%  282M 0s
  4750K .......... .......... .......... .......... .......... 39%  145M 0s
  4800K .......... .......... .......... .......... .......... 40%  152M 0s
  4850K .......... .......... .......... .......... .......... 40%  136M 0s
  4900K .......... .......... .......... .......... .......... 41%  763M 0s
  4950K .......... .......... .......... .......... .......... 41%  188M 0s
  5000K .......... .......... .......... .......... .......... 41%  156M 0s
  5050K .......... .......... .......... .......... .......... 42%  168M 0s
  5100K .......... .......... .......... .......... .......... 42%  822M 0s
  5150K .......... .......... .......... .......... .......... 43% 98.5M 0s
  5200K .......... .......... .......... .......... .......... 43%  322M 0s
  5250K .......... .......... .......... .......... .......... 43%  162M 0s
  5300K .......... .......... .......... .......... .......... 44%  173M 0s
  5350K .......... .......... .......... .......... .......... 44%  775M 0s
  5400K .......... .......... .......... .......... .......... 45%  178M 0s
  5450K .......... .......... .......... .......... .......... 45%  164M 0s
  5500K .......... .......... .......... .......... .......... 45%  175M 0s
  5550K .......... .......... .......... .......... .......... 46%  182M 0s
  5600K .......... .......... .......... .......... .......... 46%  807M 0s
  5650K .......... .......... .......... .......... .......... 47%  183M 0s
  5700K .......... .......... .......... .......... .......... 47%  166M 0s
  5750K .......... .......... .......... .......... .......... 48%  190M 0s
  5800K .......... .......... .......... .......... .......... 48%  831M 0s
  5850K .......... .......... .......... .......... .......... 48%  180M 0s
  5900K .......... .......... .......... .......... .......... 49%  188M 0s
  5950K .......... .......... .......... .......... .......... 49%  192M 0s
  6000K .......... .......... .......... .......... .......... 50%  109M 0s
  6050K .......... .......... .......... .......... .......... 50%  787M 0s
  6100K .......... .......... .......... .......... .......... 50% 80.9M 0s
  6150K .......... .......... .......... .......... .......... 51%  124M 0s
  6200K .......... .......... .......... .......... .......... 51% 65.3M 0s
  6250K .......... .......... .......... .......... .......... 52%  222M 0s
  6300K .......... .......... .......... .......... .......... 52%  826M 0s
  6350K .......... .......... .......... .......... .......... 53% 74.3M 0s
  6400K .......... .......... .......... .......... .......... 53%  149M 0s
  6450K .......... .......... .......... .......... .......... 53%  122M 0s
  6500K .......... .......... .......... .......... .......... 54%  835M 0s
  6550K .......... .......... .......... .......... .......... 54%  111M 0s
  6600K .......... .......... .......... .......... .......... 55%  493M 0s
  6650K .......... .......... .......... .......... .......... 55% 58.8M 0s
  6700K .......... .......... .......... .......... .......... 55%  117M 0s
  6750K .......... .......... .......... .......... .......... 56%  104M 0s
  6800K .......... .......... .......... .......... .......... 56%  830M 0s
  6850K .......... .......... .......... .......... .......... 57%  177M 0s
  6900K .......... .......... .......... .......... .......... 57%  122M 0s
  6950K .......... .......... .......... .......... .......... 57%  121M 0s
  7000K .......... .......... .......... .......... .......... 58%  713M 0s
  7050K .......... .......... .......... .......... .......... 58%  121M 0s
  7100K .......... .......... .......... .......... .......... 59% 5.78M 0s
  7150K .......... .......... .......... .......... .......... 59%  736M 0s
  7200K .......... .......... .......... .......... .......... 60% 60.0M 0s
  7250K .......... .......... .......... .......... .......... 60%  856M 0s
  7300K .......... .......... .......... .......... .......... 60%  293M 0s
  7350K .......... .......... .......... .......... .......... 61%  133M 0s
  7400K .......... .......... .......... .......... .......... 61%  131M 0s
  7450K .......... .......... .......... .......... .......... 62% 52.0M 0s
  7500K .......... .......... .......... .......... .......... 62%  652M 0s
  7550K .......... .......... .......... .......... .......... 62%  336M 0s
  7600K .......... .......... .......... .......... .......... 63% 93.2M 0s
  7650K .......... .......... .......... .......... .......... 63%  332M 0s
  7700K .......... .......... .......... .......... .......... 64%  639M 0s
  7750K .......... .......... .......... .......... .......... 64%  141M 0s
  7800K .......... .......... .......... .......... .......... 65%  155M 0s
  7850K .......... .......... .......... .......... .......... 65%  132M 0s
  7900K .......... .......... .......... .......... .......... 65%  123M 0s
  7950K .......... .......... .......... .......... .......... 66%  824M 0s
  8000K .......... .......... .......... .......... .......... 66%  256M 0s
  8050K .......... .......... .......... .......... .......... 67%  173M 0s
  8100K .......... .......... .......... .......... .......... 67% 97.0M 0s
  8150K .......... .......... .......... .......... .......... 67%  387M 0s
  8200K .......... .......... .......... .......... .......... 68%  772M 0s
  8250K .......... .......... .......... .......... .......... 68%  154M 0s
  8300K .......... .......... .......... .......... .......... 69%  166M 0s
  8350K .......... .......... .......... .......... .......... 69%  182M 0s
  8400K .......... .......... .......... .......... .......... 70%  849M 0s
  8450K .......... .......... .......... .......... .......... 70%  160M 0s
  8500K .......... .......... .......... .......... .......... 70%  172M 0s
  8550K .......... .......... .......... .......... .......... 71%  132M 0s
  8600K .......... .......... .......... .......... .......... 71%  188M 0s
  8650K .......... .......... .......... .......... .......... 72%  891M 0s
  8700K .......... .......... .......... .......... .......... 72%  246M 0s
  8750K .......... .......... .......... .......... .......... 72%  196M 0s
  8800K .......... .......... .......... .......... .......... 73%  164M 0s
  8850K .......... .......... .......... .......... .......... 73%  215M 0s
  8900K .......... .......... .......... .......... .......... 74%  630M 0s
  8950K .......... .......... .......... .......... .......... 74%  186M 0s
  9000K .......... .......... .......... .......... .......... 74%  107M 0s
  9050K .......... .......... .......... .......... .......... 75% 78.9M 0s
  9100K .......... .......... .......... .......... .......... 75%  143M 0s
  9150K .......... .......... .......... .......... .......... 76%  582M 0s
  9200K .......... .......... .......... .......... .......... 76% 65.4M 0s
  9250K .......... .......... .......... .......... .......... 77%  219M 0s
  9300K .......... .......... .......... .......... .......... 77% 70.4M 0s
  9350K .......... .......... .......... .......... .......... 77%  180M 0s
  9400K .......... .......... .......... .......... .......... 78%  671M 0s
  9450K .......... .......... .......... .......... .......... 78%  118M 0s
  9500K .......... .......... .......... .......... .......... 79% 87.0M 0s
  9550K .......... .......... .......... .......... .......... 79%  719M 0s
  9600K .......... .......... .......... .......... .......... 79%  841M 0s
  9650K .......... .......... .......... .......... .......... 80% 65.1M 0s
  9700K .......... .......... .......... .......... .......... 80%  110M 0s
  9750K .......... .......... .......... .......... .......... 81%  114M 0s
  9800K .......... .......... .......... .......... .......... 81%  817M 0s
  9850K .......... .......... .......... .......... .......... 82%  160M 0s
  9900K .......... .......... .......... .......... .......... 82%  133M 0s
  9950K .......... .......... .......... .......... .......... 82%  122M 0s
 10000K .......... .......... .......... .......... .......... 83%  114M 0s
 10050K .......... .......... .......... .......... .......... 83% 5.58M 0s
 10100K .......... .......... .......... .......... .......... 84%  500M 0s
 10150K .......... .......... .......... .......... .......... 84%  888M 0s
 10200K .......... .......... .......... .......... .......... 84%  109M 0s
 10250K .......... .......... .......... .......... .......... 85%  236M 0s
 10300K .......... .......... .......... .......... .......... 85%  152M 0s
 10350K .......... .......... .......... .......... .......... 86%  620M 0s
 10400K .......... .......... .......... .......... .......... 86%  126M 0s
 10450K .......... .......... .......... .......... .......... 86% 52.5M 0s
 10500K .......... .......... .......... .......... .......... 87%  369M 0s
 10550K .......... .......... .......... .......... .......... 87% 83.7M 0s
 10600K .......... .......... .......... .......... .......... 88%  681M 0s
 10650K .......... .......... .......... .......... .......... 88%  519M 0s
 10700K .......... .......... .......... .......... .......... 89%  146M 0s
 10750K .......... .......... .......... .......... .......... 89%  155M 0s
 10800K .......... .......... .......... .......... .......... 89%  711M 0s
 10850K .......... .......... .......... .......... .......... 90%  129M 0s
 10900K .......... .......... .......... .......... .......... 90%  128M 0s
 10950K .......... .......... .......... .......... .......... 91%  239M 0s
 11000K .......... .......... .......... .......... .......... 91%  124M 0s
 11050K .......... .......... .......... .......... .......... 91%  654M 0s
 11100K .......... .......... .......... .......... .......... 92%  121M 0s
 11150K .......... .......... .......... .......... .......... 92%  477M 0s
 11200K .......... .......... .......... .......... .......... 93%  165M 0s
 11250K .......... .......... .......... .......... .......... 93%  128M 0s
 11300K .......... .......... .......... .......... .......... 94%  749M 0s
 11350K .......... .......... .......... .......... .......... 94%  263M 0s
 11400K .......... .......... .......... .......... .......... 94%  140M 0s
 11450K .......... .......... .......... .......... .......... 95%  211M 0s
 11500K .......... .......... .......... .......... .......... 95%  768M 0s
 11550K .......... .......... .......... .......... .......... 96%  128M 0s
 11600K .......... .......... .......... .......... .......... 96%  182M 0s
 11650K .......... .......... .......... .......... .......... 96%  270M 0s
 11700K .......... .......... .......... .......... .......... 97%  172M 0s
 11750K .......... .......... .......... .......... .......... 97%  855M 0s
 11800K .......... .......... .......... .......... .......... 98%  180M 0s
 11850K .......... .......... .......... .......... .......... 98%  189M 0s
 11900K .......... .......... .......... .......... .......... 99%  198M 0s
 11950K .......... .......... .......... .......... .......... 99%  103M 0s
 12000K .......... .......... .......... .......... .......... 99%  861M 0s
 12050K .......... ..........                                 100%  774M=0.2s

2025-03-23 22:41:03 (47.8 MB/s) - ‘/home/mmohamed/test/ref.fa’ saved [12359807/12359807]</code></pre>
</div>
</div>
</section>
<section id="step-2-convert-bam-to-cram" class="level4">
<h4 class="anchored" data-anchor-id="step-2-convert-bam-to-cram">Step 2: Convert BAM to CRAM</h4>
<p>Use <code>srun</code> and <code>apptainer exec</code> to run commands inside the containerized environment. Bind directories to the container using the <code>--bind</code> option, and set the <code>APPTAINER_CACHEDIR</code> to a writable directory for caching the container image.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load ris apptainer <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">APPTAINER_CACHEDIR</span><span class="op">=</span>/scratch2/fs1/dspencer/mohamed/.apptainer-cache <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="ex">srun</span> <span class="at">--nodelist</span><span class="op">=</span>c2-bigmem-002 <span class="dt">\</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    apptainer exec <span class="dt">\</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"/home/mmohamed:/home/mmohamed,/storage2/fs1/dspencer/Active:/storage2/fs1/dspencer/Active"</span> <span class="dt">\</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    docker://ghcr.io/dhslab/docker-baseimage:250222 <span class="dt">\</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    samtools view <span class="at">-C</span> <span class="at">-T</span> ~/test/ref.fa <span class="at">-o</span> ~/test/test.cram ~/test/test.bam</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>INFO:    Converting OCI blobs to SIF format
INFO:    Starting build...
Copying blob sha256:846c0b181fff0c667d9444f8378e8fcfa13116da8d308bf21673f7e4bea8d580
Copying blob sha256:7bfdaaec019c2b24b97d39f9e6103f21e4676067a6d054c064c8ec3a6c1bb3f8
Copying blob sha256:ac7402f41e7ceb8b7644ca179866beda2d04192f8ef0b7f7ca9ddd3c6d195faf
Copying blob sha256:e82612e3cdf7b3d3c52c5c663221d58f3f9be76149b4039df4c740ea1843fc6d
Copying blob sha256:a7ece9657ae26a5dc1db5579ea151d7155e1cdddd59e2e58f5dbbf8f0f4092b8
Copying blob sha256:004ba9dbaacc4b2ff393e8d480245df62468c0487c8913fa9f137ee941fe13e5
Copying blob sha256:a1823ed13177db4b5dfe366f94863499c0dbdac2186c005237f1bb04027aa0ea
Copying blob sha256:a9473c9d37a92158affe9a2b2b86630e6fbd70b791688be7e8881132e7c3c24a
Copying config sha256:24f6684f0a62f26f3d6d572bbf52c426b34a03d73e3e73dcb170722ddf88e7c5
Writing manifest to image destination
2025/03/23 22:51:52  info unpack layer: sha256:846c0b181fff0c667d9444f8378e8fcfa13116da8d308bf21673f7e4bea8d580
2025/03/23 22:51:53  info unpack layer: sha256:e82612e3cdf7b3d3c52c5c663221d58f3f9be76149b4039df4c740ea1843fc6d
2025/03/23 22:51:56  warn rootless{usr/lib/x86_64-linux-gnu/gstreamer1.0/gstreamer-1.0/gst-ptp-helper} ignoring (usually) harmless EPERM on setxattr "security.capability"
2025/03/23 22:52:02  info unpack layer: sha256:004ba9dbaacc4b2ff393e8d480245df62468c0487c8913fa9f137ee941fe13e5
2025/03/23 22:52:02  info unpack layer: sha256:ac7402f41e7ceb8b7644ca179866beda2d04192f8ef0b7f7ca9ddd3c6d195faf
2025/03/23 22:52:02  info unpack layer: sha256:7bfdaaec019c2b24b97d39f9e6103f21e4676067a6d054c064c8ec3a6c1bb3f8
2025/03/23 22:52:02  info unpack layer: sha256:a7ece9657ae26a5dc1db5579ea151d7155e1cdddd59e2e58f5dbbf8f0f4092b8
2025/03/23 22:52:17  info unpack layer: sha256:a1823ed13177db4b5dfe366f94863499c0dbdac2186c005237f1bb04027aa0ea
2025/03/23 22:52:20  info unpack layer: sha256:a9473c9d37a92158affe9a2b2b86630e6fbd70b791688be7e8881132e7c3c24a
INFO:    Creating SIF file...</code></pre>
</div>
</div>
</section>
<section id="step-3-verify-the-cram-file" class="level4">
<h4 class="anchored" data-anchor-id="step-3-verify-the-cram-file">Step 3: Verify the CRAM File</h4>
<p>Check the contents of the CRAM file to ensure the conversion was successful:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load ris apptainer <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">APPTAINER_CACHEDIR</span><span class="op">=</span>/scratch2/fs1/dspencer/mohamed/.apptainer-cache <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="ex">srun</span> <span class="at">--nodelist</span><span class="op">=</span>c2-bigmem-002 <span class="dt">\</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    apptainer exec <span class="dt">\</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">--bind</span> <span class="st">"/home/mmohamed:/home/mmohamed,/storage2/fs1/dspencer/Active:/storage2/fs1/dspencer/Active"</span> <span class="dt">\</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    docker://ghcr.io/dhslab/docker-baseimage:250222 <span class="dt">\</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    samtools view ~/test/test.cram <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>INFO:    Using cached SIF image
SRR1822153.3807593  99  I   2   11  12S23M1D20M1D6M15S  =   34  121 CCCACACCCACACACACCACACCCACACACACACAACCACCCCCCACCCAACACCCACCCAAACCAAACACAAACC    AAAAAAFFF&lt;FFFFF&lt;F..&lt;FF&lt;FFA)A.F&lt;FAF.FF...)&lt;&lt;&lt;)..)&lt;))))AF))&lt;FF&lt;A.)F.&lt;A.FFF7.77    AS:i:58 XS:i:52 XN:i:0  XM:i:5  XO:i:2  XG:i:2  YS:i:140    YT:Z:CP MD:Z:18C4^C5A2A3A1C5^A6 NM:i:7</code></pre>
</div>
</div>
</section>
</section>
<section id="additional-notes" class="level3">
<h3 class="anchored" data-anchor-id="additional-notes">Additional Notes</h3>
<ul>
<li>Apptainer supports multiple execution methods, such as <code>apptainer shell</code>, <code>apptainer run</code>, or directly running from a Docker image (<code>docker://...</code>) or a local <code>.sif</code> file (e.g., <code>apptainer exec /path/to/image.sif ...</code>).</li>
<li>Differences exist between Apptainer and Docker in handling bind mounts and environment variables. Refer to the <a href="https://apptainer.org/content/user/main/">Apptainer documentation</a> for more details.</li>
</ul>
<hr>
</section>
</section>
<section id="running-a-container-job" class="level2">
<h2 class="anchored" data-anchor-id="running-a-container-job">Running a Container Job</h2>
<p>This section explains how to run containerized jobs using other container technologies on the Compute2 SLURM cluster.</p>
<p>…content for running container jobs…</p>
<hr>
</section>
<section id="running-a-jupyterlab-server" class="level2">
<h2 class="anchored" data-anchor-id="running-a-jupyterlab-server">Running a JupyterLab Server</h2>
<p>Set up and use a JupyterLab server on the Compute2 SLURM cluster for interactive data analysis and visualization.</p>
<p>…content for running JupyterLab server…</p>
<hr>
</section>
<section id="running-an-rstudio-server" class="level2">
<h2 class="anchored" data-anchor-id="running-an-rstudio-server">Running an RStudio Server</h2>
<p>Learn how to set up and use an RStudio server on the Compute2 SLURM cluster for statistical computing and graphics.</p>
<p>…content for running RStudio server…</p>
<hr>
<section id="additional-resources" class="level3">
<h3 class="anchored" data-anchor-id="additional-resources">Additional Resources</h3>
<p>For more detailed guides and advanced workflows, explore the following:</p>
<ul>
<li><a href="">Module System</a></li>
<li><a href="">Containers</a></li>
<li><a href="../../content/spack/index.html">Spack</a></li>
<li><a href="">JupyterLab</a></li>
<li><a href="">RStudio</a></li>
<li><a href="">VSCode Remote</a></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>