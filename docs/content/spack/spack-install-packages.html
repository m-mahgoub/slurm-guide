<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Spack – SLURM User Guide</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../content/spack/spack-setup.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-1956fa4f3b836d20234934491b753c84.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">SLURM User Guide</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../content/quick-start/index.html"> 
<span class="menu-text">Quick Start</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../content/guide/index.html" aria-current="page"> 
<span class="menu-text">Guide</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/guide/index.html">Guide</a></li><li class="breadcrumb-item"><a href="../../content/spack/index.html">Spack</a></li><li class="breadcrumb-item"><a href="../../content/spack/spack-install-packages.html">Install Packages</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../content/guide/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guide</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Module System</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Containers</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../content/spack/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spack</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/spack/spack-setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Setup</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/spack/spack-install-packages.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Install Packages</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">JupyterLab</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">RStudio</span></span>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">VSCode Remote</span></span>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#installing-packages-in-spack" id="toc-installing-packages-in-spack" class="nav-link active" data-scroll-target="#installing-packages-in-spack">Installing Packages in Spack</a>
  <ul class="collapse">
  <li><a href="#set-spack-environment" id="toc-set-spack-environment" class="nav-link" data-scroll-target="#set-spack-environment">Set Spack Environment</a></li>
  <li><a href="#configure-spack-for-compute2" id="toc-configure-spack-for-compute2" class="nav-link" data-scroll-target="#configure-spack-for-compute2">Configure Spack for Compute2</a>
  <ul class="collapse">
  <li><a href="#configure-gcc-compiler" id="toc-configure-gcc-compiler" class="nav-link" data-scroll-target="#configure-gcc-compiler">Configure GCC Compiler</a></li>
  <li><a href="#configure-krb5" id="toc-configure-krb5" class="nav-link" data-scroll-target="#configure-krb5">Configure <code>krb5</code></a></li>
  <li><a href="#install-binutils-version-2.43.1" id="toc-install-binutils-version-2.43.1" class="nav-link" data-scroll-target="#install-binutils-version-2.43.1">Install <code>binutils</code> Version 2.43.1</a></li>
  </ul></li>
  <li><a href="#install-cowsay" id="toc-install-cowsay" class="nav-link" data-scroll-target="#install-cowsay">Install <code>cowsay</code></a></li>
  <li><a href="#load-the-cowsay-module" id="toc-load-the-cowsay-module" class="nav-link" data-scroll-target="#load-the-cowsay-module">Load the <code>cowsay</code> Module</a>
  <ul class="collapse">
  <li><a href="#add-spacks-module-path-to-the-module-system" id="toc-add-spacks-module-path-to-the-module-system" class="nav-link" data-scroll-target="#add-spacks-module-path-to-the-module-system">Add Spack’s Module Path to the Module System</a></li>
  <li><a href="#load-the-cowsay-module-1" id="toc-load-the-cowsay-module-1" class="nav-link" data-scroll-target="#load-the-cowsay-module-1">Load the <code>cowsay</code> Module</a></li>
  </ul></li>
  <li><a href="#verify-the-installation" id="toc-verify-the-installation" class="nav-link" data-scroll-target="#verify-the-installation">Verify the Installation</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/guide/index.html">Guide</a></li><li class="breadcrumb-item"><a href="../../content/spack/index.html">Spack</a></li><li class="breadcrumb-item"><a href="../../content/spack/spack-install-packages.html">Install Packages</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Spack</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="installing-packages-in-spack" class="level1">
<h1>Installing Packages in Spack</h1>
<p>This guide provides a step-by-step walkthrough for installing the <code>cowsay</code> package and module using Spack on the Compute2 SLURM cluster. <code>cowsay</code> is a fun utility that generates ASCII art of a cow saying a message. While installing <code>cowsay</code> is straightforward, there are some steps specific to the RIS Compute2 cluster that need to be followed to ensure compatibility.</p>
<section id="set-spack-environment" class="level2">
<h2 class="anchored" data-anchor-id="set-spack-environment">Set Spack Environment</h2>
<p>Before installing any packages for the first time, you need to configure Spack to work correctly with the Compute2 SLURM cluster.</p>
<p>First, set some Spack environment variables. This can be easily done by sourcing <code>${SPACK_ROOT}/share/spack/setup-env.sh</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the Spack root directory</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="va">SPACK_ROOT</span><span class="op">=</span><span class="va">$(</span><span class="ex">spack</span> location <span class="at">-r</span><span class="va">)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Source the Spack environment setup script</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="bu">.</span> <span class="st">"</span><span class="va">$SPACK_ROOT</span><span class="st">/share/spack/setup-env.sh"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You need to run the above source command every time you want to install a new package with Spack. Alternatively, you can add it to your <code>.bashrc</code> or <code>.bash_profile</code> to make it persistent across sessions, but be cautious as it may interfere with other environments.</p>
</div>
</div>
</section>
<section id="configure-spack-for-compute2" class="level2">
<h2 class="anchored" data-anchor-id="configure-spack-for-compute2">Configure Spack for Compute2</h2>
<p>There are a few configurations that need to be set up before you can successfully install packages with Spack on Compute2. These are done once when you install your first package with Spack.</p>
<section id="configure-gcc-compiler" class="level3">
<h3 class="anchored" data-anchor-id="configure-gcc-compiler">Configure GCC Compiler</h3>
<p>Compute2 currently uses GCC 13.1.0 as the default compiler. You need to ensure that Spack is configured to use this version of GCC.</p>
<section id="check-current-compiler-configuration" class="level4">
<h4 class="anchored" data-anchor-id="check-current-compiler-configuration">Check Current Compiler Configuration</h4>
<p>To check the current compiler configuration in Spack, run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">spack</span> compilers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==&gt; Available compilers
-- gcc rhel9-x86_64 ---------------------------------------------
gcc@11.3.1</code></pre>
</div>
</div>
<p>If <code>gcc@13.1.0</code> is not listed, you need to load the appropriate module and add it to Spack’s list of available compilers. If it is listed, you can skip this step.</p>
</section>
<section id="add-gcc-to-spacks-compiler-list" class="level4">
<h4 class="anchored" data-anchor-id="add-gcc-to-spacks-compiler-list">Add GCC to Spack’s Compiler List</h4>
<p>To do this, first check if the GCC module is loaded:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently Loaded Modulefiles:
 1) gcc/13.1.0               3) basetools/1.0.0   5) python3      
 2) slurm/compute2/23.02.5   4) ris               6) spack/v0.23  </code></pre>
</div>
</div>
<p>If <code>gcc/13.1.0</code> is not listed, load it using:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load gcc/13.1.0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then, add GCC to Spack’s list of available compilers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">spack</span> compiler find</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==&gt; Added 1 new compiler to /home/mmohamed/.spack/linux/compilers.yaml
    gcc@13.1.0
==&gt; Compilers are defined in the following files:
    /scratch2/fs1/sleong/Active/compute2/ris/thpc/linux/software/spack/v0.23/etc/spack/linux/compilers.yaml
    /home/mmohamed/.spack/linux/compilers.yaml</code></pre>
</div>
</div>
<p>Verify that the compiler has been successfully added by running:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">spack</span> compilers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==&gt; Available compilers
-- gcc rhel9-x86_64 ---------------------------------------------
gcc@13.1.0
gcc@11.3.1</code></pre>
</div>
</div>
</section>
</section>
<section id="configure-krb5" class="level3">
<h3 class="anchored" data-anchor-id="configure-krb5">Configure <code>krb5</code></h3>
<p>Before installing any packages, you need to configure <code>krb5</code>, which is a dependency for many packages in Spack. This step is crucial to avoid permission issues during package installations. On Compute2, <code>krb5</code> is provided as a system package. To ensure that Spack uses the system’s <code>krb5</code> instead of trying to build its own version, you need to configure it properly.</p>
<p>First, find the <code>krb5</code> package using Spack’s external find command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">spack</span> external find krb5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==&gt; The following specs have been detected on this system and added to /home/mmohamed/.spack/packages.yaml
krb5@1.20.1</code></pre>
</div>
</div>
<p>This command finds the <code>krb5</code> package and adds it to <code>~/.spack/packages.yaml</code>. Confirm that it is added by running:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> ~/.spack/packages.yaml</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>packages:
  krb5:
    externals:
    - spec: krb5@1.20.1
      prefix: /usr</code></pre>
</div>
</div>
<p>You should see an entry for <code>krb5</code> in the output. This ensures that Spack uses the system’s <code>krb5</code> package instead of trying to build its own version.</p>
</section>
<section id="install-binutils-version-2.43.1" class="level3">
<h3 class="anchored" data-anchor-id="install-binutils-version-2.43.1">Install <code>binutils</code> Version 2.43.1</h3>
<p><code>binutils</code> is a collection of binary tools used for handling object files, libraries, and executables. It is essential for compiling and linking programs, especially when using <code>gcc</code>. Currently, the default version of <code>binutils</code> on RIS Compute2 is <code>2.35</code>. This version has compatibility issues and errors when used with <code>gcc@13.1.0</code>. To resolve these issues, you need to install a newer version of <code>binutils</code>, specifically <code>2.43.1</code>, to ensure compatibility with <code>gcc@13.1.0</code> and the RIS Compute2 architecture. This version has been tested and confirmed to work well with the current setup. Additionally, some specific options were determined through trial and error to find the right combination that works effectively with <code>gcc@13.1.0</code> and the Compute2 architecture.</p>
<p>First, check if the spec for <code>binutils</code> with the required version and options is available:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">spack</span> spec binutils@2.43.1 +gas +ld +gold +headers %gcc@13.1.0 ^zlib-ng cflags=<span class="st">"-mno-avx512f"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==&gt; Fetching https://ghcr.io/v2/spack/bootstrap-buildcache-v1/blobs/sha256:82ec278bef26c42303a2c2c888612c0d37babef615bc9a0003530e0b8b4d3d2c
==&gt; Fetching https://ghcr.io/v2/spack/bootstrap-buildcache-v1/blobs/sha256:0c5831932608e7b4084fc6ce60e2b67b77dab76e5515303a049d4d30cd772321
==&gt; Installing "clingo-bootstrap@=spack%gcc@=10.2.1~docs+ipo+optimized+python+static_libstdcpp build_system=cmake build_type=Release generator=make patches=bebb819,ec99431 arch=linux-centos7-x86_64" from a buildcache
 -   binutils@2.43.1%gcc@13.1.0+gas+gold~gprofng+headers~interwork+ld~libiberty~lto~nls~pgo+plugins build_system=autotools compress_debug_sections=zlib libs=shared,static arch=linux-rhel9-sapphirerapids
 -       ^diffutils@3.10%gcc@13.1.0 build_system=autotools arch=linux-rhel9-sapphirerapids
 -           ^libiconv@1.17%gcc@13.1.0 build_system=autotools libs=shared,static arch=linux-rhel9-sapphirerapids
 -       ^gcc-runtime@13.1.0%gcc@13.1.0 build_system=generic arch=linux-rhel9-sapphirerapids
[e]      ^glibc@2.34%gcc@13.1.0 build_system=autotools arch=linux-rhel9-sapphirerapids
 -       ^gmake@4.4.1%gcc@13.1.0~guile build_system=generic arch=linux-rhel9-sapphirerapids
 -       ^pkgconf@2.2.0%gcc@13.1.0 build_system=autotools arch=linux-rhel9-sapphirerapids
 -       ^zlib-ng@2.2.1%gcc@13.1.0 cflags=-mno-avx512f +compat+new_strategies+opt+pic+shared build_system=autotools arch=linux-rhel9-sapphirerapids
 -       ^zstd@1.5.6%gcc@13.1.0~programs build_system=makefile libs=shared,static arch=linux-rhel9-sapphirerapids</code></pre>
</div>
</div>
<p>If no errors are shown, you can proceed to install <code>binutils</code> with the specified options:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">spack</span> install binutils@2.43.1 +gas +ld +gold +headers %gcc@13.1.0 ^zlib-ng cflags=<span class="st">"-mno-avx512f"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[+] /usr (external glibc-2.34-gcrw4gafyklwlrq65fbsa7kxjc3uclxs)
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/gcc-runtime-13.1.0-ejzbgmwkb2zvlczfrubsry2kxpaerlhh
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/zlib-ng-2.2.1-dpe5qvn52jsktpvk4z2wjcx6alualupu
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/zstd-1.5.6-3w5td2opetl5rthgsba3ererfozremng
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/binutils-2.43.1-rvtydb7c44s5ueey7k635l27c3soluib</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Sometimes, you might encounter an error like this during installation:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/tmp/cc2CRT67.s:31537:</span> Error: no such instruction: <span class="kw">`</span><span class="ex">vmovw</span> 14<span class="er">(</span><span class="ex">%rsp</span><span class="kw">)</span><span class="ex">,%xmm0</span><span class="st">'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This error can be resolved by sourcing the Spack environment setup script again:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="bu">.</span> <span class="st">"</span><span class="va">$SPACK_ROOT</span><span class="st">/share/spack/setup-env.sh"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>After sourcing the script, try the installation command again.</p>
</div>
</div>
<p>Load the installed <code>binutils</code>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">spack</span> load binutils@2.43.1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Add <code>binutils</code> to the PATH and other environment variables to ensure proper functionality:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span><span class="va">$(</span><span class="ex">spack</span> location <span class="at">-i</span> binutils@2.43.1<span class="va">)</span>/bin:<span class="va">$PATH</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">LD_LIBRARY_PATH</span><span class="op">=</span><span class="va">$(</span><span class="ex">spack</span> location <span class="at">-i</span> binutils@2.43.1<span class="va">)</span>/lib:<span class="va">$LD_LIBRARY_PATH</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">AS</span><span class="op">=</span><span class="va">$(</span><span class="ex">spack</span> location <span class="at">-i</span> binutils@2.43.1<span class="va">)</span>/bin/as</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">LD</span><span class="op">=</span><span class="va">$(</span><span class="ex">spack</span> location <span class="at">-i</span> binutils@2.43.1<span class="va">)</span>/bin/ld</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You need to run the above export commands every time you use Spack to install or build packages. Alternatively, if you use Spack frequently to install tools, it is advisable to add these export commands to your <code>.bashrc</code> or <code>.bash_profile</code> for convenience.</p>
</div>
</div>
<p>Verify that <code>binutils</code> is correctly added to the PATH:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span> as</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span> ld</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>/storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/__spack_path_placeholder__/__spack_path_placeholder__/__spa/linux-rhel9-sapphirerapids/gcc-13.1.0/binutils-2.43.1-rvtydb7c44s5ueey7k635l27c3soluib/bin/as
/storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/__spack_path_placeholder__/__spack_path_placeholder__/__spa/linux-rhel9-sapphirerapids/gcc-13.1.0/binutils-2.43.1-rvtydb7c44s5ueey7k635l27c3soluib/bin/ld</code></pre>
</div>
</div>
</section>
</section>
<section id="install-cowsay" class="level2">
<h2 class="anchored" data-anchor-id="install-cowsay">Install <code>cowsay</code></h2>
<p>Once Spack is initialized, install the <code>cowsay</code> package. First, check if <code>cowsay</code> is listed in Spack’s package repository:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">spack</span> list cowsay</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cowsay</code></pre>
</div>
</div>
<p>Find available versions of <code>cowsay</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">spack</span> info cowsay</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Package:   cowsay

Description:
    A program that generates ASCII pictures of a cow with a message.

Homepage: https://github.com/tnalpgge/rank-amateur-cowsay

Preferred version:  
    3.04    https://github.com/tnalpgge/rank-amateur-cowsay/archive/cowsay-3.04.tar.gz

Safe versions:  
    3.04    https://github.com/tnalpgge/rank-amateur-cowsay/archive/cowsay-3.04.tar.gz

Deprecated versions:  
    None

Variants:
    build_system [generic]        generic
        Build systems supported by the package

Build Dependencies:
    None

Link Dependencies:
    None

Run Dependencies:
    perl

Licenses: 
    Artistic-1.0-Perl OR GPL-2.0-or-later</code></pre>
</div>
</div>
<p>Install the <code>cowsay</code> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">spack</span> install cowsay</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[+] /usr (external glibc-2.34-gcrw4gafyklwlrq65fbsa7kxjc3uclxs)
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/gcc-runtime-13.1.0-ejzbgmwkb2zvlczfrubsry2kxpaerlhh
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/pkgconf-2.2.0-2azftz6o5juzvss3hzwkss2frzgskobd
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/diffutils-3.10-gurtuvtux2n42azagworzd2aehpouger
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/zlib-ng-2.2.1-dpe5qvn52jsktpvk4z2wjcx6alualupu
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/gmake-4.4.1-rysf64ht4ssf37tqza4pcvwx4ia3g35w
==&gt; Installing berkeley-db-18.1.40-hhgfzochuajbpcn3k6w7wuy7lnhkglpv [7/13]
==&gt; No binary for berkeley-db-18.1.40-hhgfzochuajbpcn3k6w7wuy7lnhkglpv found: installing from source
==&gt; Fetching https://mirror.spack.io/_source-cache/archive/0c/0cecb2ef0c67b166de93732769abdeba0555086d51de1090df325e18ee8da9c8.tar.gz
==&gt; Applied patch /scratch2/fs1/sleong/Active/compute2/ris/thpc/linux/software/spack/v0.23/var/spack/repos/builtin/packages/berkeley-db/drop-docs.patch
==&gt; Applied patch /scratch2/fs1/sleong/Active/compute2/ris/thpc/linux/software/spack/v0.23/var/spack/repos/builtin/packages/berkeley-db/tls.patch
==&gt; Ran patch() for berkeley-db
==&gt; berkeley-db: Executing phase: 'autoreconf'
==&gt; berkeley-db: Executing phase: 'configure'
==&gt; berkeley-db: Executing phase: 'build'
==&gt; berkeley-db: Executing phase: 'install'
==&gt; berkeley-db: Successfully installed berkeley-db-18.1.40-hhgfzochuajbpcn3k6w7wuy7lnhkglpv
  Stage: 31.73s.  Autoreconf: 0.00s.  Configure: 18.55s.  Build: 7.77s.  Install: 0.95s.  Post-install: 0.35s.  Total: 59.61s
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/berkeley-db-18.1.40-hhgfzochuajbpcn3k6w7wuy7lnhkglpv
==&gt; Installing ncurses-6.5-zuudv673gyyqjmrynmoff23aouwpdxlc [8/13]
==&gt; No binary for ncurses-6.5-zuudv673gyyqjmrynmoff23aouwpdxlc found: installing from source
==&gt; Fetching https://mirror.spack.io/_source-cache/archive/13/136d91bc269a9a5785e5f9e980bc76ab57428f604ce3e5a5a90cebc767971cc6.tar.gz
==&gt; Applied patch /scratch2/fs1/sleong/Active/compute2/ris/thpc/linux/software/spack/v0.23/var/spack/repos/builtin/packages/ncurses/rxvt_unicode_6_4.patch
==&gt; ncurses: Executing phase: 'autoreconf'
==&gt; ncurses: Executing phase: 'configure'
==&gt; ncurses: Executing phase: 'build'
==&gt; ncurses: Executing phase: 'install'
==&gt; ncurses: Successfully installed ncurses-6.5-zuudv673gyyqjmrynmoff23aouwpdxlc
  Stage: 7.40s.  Autoreconf: 0.00s.  Configure: 39.89s.  Build: 17.66s.  Install: 30.57s.  Post-install: 11.48s.  Total: 1m 47.32s
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/ncurses-6.5-zuudv673gyyqjmrynmoff23aouwpdxlc
==&gt; Installing bzip2-1.0.8-jjbso5zq7au5ql3eok7mgwqgbw4zcs7a [9/13]
==&gt; No binary for bzip2-1.0.8-jjbso5zq7au5ql3eok7mgwqgbw4zcs7a found: installing from source
==&gt; Fetching https://mirror.spack.io/_source-cache/archive/ab/ab5a03176ee106d3f0fa90e381da478ddae405918153cca248e682cd0c4a2269.tar.gz
==&gt; Ran patch() for bzip2
==&gt; bzip2: Executing phase: 'install'
==&gt; bzip2: Successfully installed bzip2-1.0.8-jjbso5zq7au5ql3eok7mgwqgbw4zcs7a
  Stage: 0.85s.  Install: 2.19s.  Post-install: 0.24s.  Total: 3.49s
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/bzip2-1.0.8-jjbso5zq7au5ql3eok7mgwqgbw4zcs7a
==&gt; Installing readline-8.2-ruakm6n2i66pp7f722xpl7niog2nlajz [10/13]
==&gt; No binary for readline-8.2-ruakm6n2i66pp7f722xpl7niog2nlajz found: installing from source
==&gt; Fetching https://mirror.spack.io/_source-cache/archive/3f/3feb7171f16a84ee82ca18a36d7b9be109a52c04f492a053331d7d1095007c35.tar.gz
==&gt; Fetching https://mirror.spack.io/_source-cache/archive/bb/bbf97f1ec40a929edab5aa81998c1e2ef435436c597754916e6a5868f273aff7
==&gt; Applied patch https://ftpmirror.gnu.org/readline/readline-8.2-patches/readline82-001
==&gt; readline: Executing phase: 'autoreconf'
==&gt; readline: Executing phase: 'configure'
==&gt; readline: Executing phase: 'build'
==&gt; readline: Executing phase: 'install'
==&gt; readline: Successfully installed readline-8.2-ruakm6n2i66pp7f722xpl7niog2nlajz
  Stage: 1.63s.  Autoreconf: 0.00s.  Configure: 9.74s.  Build: 1.49s.  Install: 0.60s.  Post-install: 0.40s.  Total: 14.21s
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/readline-8.2-ruakm6n2i66pp7f722xpl7niog2nlajz
==&gt; Installing gdbm-1.23-mdkmmwarhumwtq6ungbo2imm7l5hzlgk [11/13]
==&gt; No binary for gdbm-1.23-mdkmmwarhumwtq6ungbo2imm7l5hzlgk found: installing from source
==&gt; Fetching https://mirror.spack.io/_source-cache/archive/74/74b1081d21fff13ae4bd7c16e5d6e504a4c26f7cde1dca0d963a484174bbcacd.tar.gz
==&gt; No patches needed for gdbm
==&gt; gdbm: Executing phase: 'autoreconf'
==&gt; gdbm: Executing phase: 'configure'
==&gt; gdbm: Executing phase: 'build'
==&gt; gdbm: Executing phase: 'install'
==&gt; gdbm: Successfully installed gdbm-1.23-mdkmmwarhumwtq6ungbo2imm7l5hzlgk
  Stage: 1.89s.  Autoreconf: 0.00s.  Configure: 8.35s.  Build: 3.07s.  Install: 1.44s.  Post-install: 0.35s.  Total: 15.56s
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/gdbm-1.23-mdkmmwarhumwtq6ungbo2imm7l5hzlgk
==&gt; Installing perl-5.40.0-tkrbryon3u4hxvmasn52gr5qin4hwlhh [12/13]
==&gt; No binary for perl-5.40.0-tkrbryon3u4hxvmasn52gr5qin4hwlhh found: installing from source
==&gt; Fetching https://mirror.spack.io/_source-cache/archive/c7/c740348f357396327a9795d3e8323bafd0fe8a5c7835fc1cbaba0cc8dfe7161f.tar.gz
==&gt; Fetching https://mirror.spack.io/_source-cache/archive/9d/9da50e155df72bce55cb69f51f1dbb4b62d23740fb99f6178bb27f22ebdf8a46.tar.gz
==&gt; Moving resource stage
    source: /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/.cache/stage/mmohamed/resource-cpanm-tkrbryon3u4hxvmasn52gr5qin4hwlhh/spack-src/
    destination: /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/.cache/stage/mmohamed/spack-stage-perl-5.40.0-tkrbryon3u4hxvmasn52gr5qin4hwlhh/spack-src/cpanm/cpanm
==&gt; Ran patch() for perl
==&gt; perl: Executing phase: 'configure'
==&gt; perl: Executing phase: 'build'
==&gt; perl: Executing phase: 'install'
==&gt; perl: Successfully installed perl-5.40.0-tkrbryon3u4hxvmasn52gr5qin4hwlhh
  Stage: 32.08s.  Configure: 1m 21.62s.  Build: 33.52s.  Install: 49.52s.  Post-install: 18.65s.  Total: 3m 36.19s
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/perl-5.40.0-tkrbryon3u4hxvmasn52gr5qin4hwlhh
==&gt; Installing cowsay-3.04-3po3c76ns6ihvqqoximyweiwdcg4du52 [13/13]
==&gt; No binary for cowsay-3.04-3po3c76ns6ihvqqoximyweiwdcg4du52 found: installing from source
==&gt; Fetching https://mirror.spack.io/_source-cache/archive/d8/d8b871332cfc1f0b6c16832ecca413ca0ac14d58626491a6733829e3d655878b.tar.gz
==&gt; No patches needed for cowsay
==&gt; cowsay: Executing phase: 'install'
==&gt; cowsay: Successfully installed cowsay-3.04-3po3c76ns6ihvqqoximyweiwdcg4du52
  Stage: 0.53s.  Install: 0.42s.  Post-install: 0.62s.  Total: 2.05s
[+] /storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/software/[padded-to-128-chars]/linux-rhel9-sapphirerapids/gcc-13.1.0/cowsay-3.04-3po3c76ns6ihvqqoximyweiwdcg4du52</code></pre>
</div>
</div>
<p>Finally, verify that <code>cowsay</code> is installed:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">spack</span> find cowsay</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>-- linux-rhel9-sapphirerapids / gcc@13.1.0 ----------------------
cowsay@3.04</code></pre>
</div>
</div>
</section>
<section id="load-the-cowsay-module" class="level2">
<h2 class="anchored" data-anchor-id="load-the-cowsay-module">Load the <code>cowsay</code> Module</h2>
<p>After successfully installing <code>cowsay</code>, you need to load its module first before using it. This step is crucial as it sets up the environment variables and paths required for <code>cowsay</code> to function correctly. When installing packages with Spack, there are two ways to load the module: using <code>spack load</code> or <code>module load</code>. To load it using <code>spack</code>, you can simply run <code>spack load cowsay</code>. This command will automatically set up the environment for <code>cowsay</code>, making it ready for use. However, it is recommended to use <code>module load</code> for better compatibility with the Compute2 environment. Luckily, with the current setup, spack automatically creates a Tcl module for <code>cowsay</code>, that is compatible with the Compute2 module system.</p>
<section id="add-spacks-module-path-to-the-module-system" class="level3">
<h3 class="anchored" data-anchor-id="add-spacks-module-path-to-the-module-system">Add Spack’s Module Path to the Module System</h3>
<p>To ensure that the <code>cowsay</code> module is recognized by the Compute2 module system, you need to add Spack’s module path to the module system. This step is essential for loading the <code>cowsay</code> module using <code>module load</code>. In the current setup, modules are stored in <code>/storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/modules/linux-rhel9-sapphirerapids/</code>. To append this path to the module system, you can use the following command:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">MODULEPATH</span><span class="op">=</span>/storage2/fs1/dspencer/Active/spencerlab/apps/modules/spack/modules/linux-rhel9-sapphirerapids/:<span class="va">$MODULEPATH</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can also add the above mentioned Spack modules’ path to your <code>.bashrc</code> or <code>.bash_profile</code> to make it persistent across sessions. This way, you won’t have to set it every time you log in.</p>
</div>
</div>
</section>
<section id="load-the-cowsay-module-1" class="level3">
<h3 class="anchored" data-anchor-id="load-the-cowsay-module-1">Load the <code>cowsay</code> Module</h3>
<p>Now that the Spack module path is set, you can load the <code>cowsay</code> module using the <code>module load</code> command:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load cowsay</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="verify-the-installation" class="level2">
<h2 class="anchored" data-anchor-id="verify-the-installation">Verify the Installation</h2>
<p>To verify that <code>cowsay</code> is installed and working correctly, you can run the following command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">cowsay</span> <span class="st">"Hello, World!"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> _______________ 
&lt; Hello, World! &gt;
 --------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||</code></pre>
</div>
</div>
<p>This command should produce an ASCII art cow saying “Hello, World!” If you see the cow, congratulations! You have successfully installed and configured <code>cowsay</code> using Spack on Compute2.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../content/spack/spack-setup.html" class="pagination-link" aria-label="Setup">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Setup</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>